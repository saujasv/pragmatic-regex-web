import{S as Xe,i as Je,s as Qe,k as i,q as V,a as L,w as Fe,l as n,m as f,r as H,h as s,c as w,x as Ke,n as r,b as F,G as t,T as $e,y as We,I as le,u as ue,f as Ze,t as xe,U as lt,z as et,L as st,H as at,o as rt,e as Ye,B as tt,Q as ot}from"../../../../chunks/index-0e9e634d.js";import{g as Le}from"../../../../chunks/navigation-c15f7844.js";import{u as it}from"../../../../chunks/store-cf389518.js";import{d as we}from"../../../../chunks/singletons-69107a7c.js";import{S as nt}from"../../../../chunks/SvelteToast-ff19346a.js";import{t as pe}from"../../../../chunks/stores-3e1ed05a.js";function ze(a,e,l){const o=a.slice();return o[21]=e[l],o}function ct(a){let e,l,o=a[21].string+"",c,d,u,g,T,O,m,y,b,I,B,A,S,$;function G(){return a[14](a[21])}return{c(){e=i("div"),l=i("li"),c=V(o),d=L(),u=i("li"),g=i("i"),T=L(),O=i("li"),m=i("i"),y=L(),b=i("li"),I=i("button"),B=i("i"),A=L(),this.h()},l(k){e=n(k,"DIV",{class:!0});var h=f(e);l=n(h,"LI",{class:!0});var C=f(l);c=H(C,o),C.forEach(s),d=w(h),u=n(h,"LI",{class:!0});var q=f(u);g=n(q,"I",{class:!0}),f(g).forEach(s),q.forEach(s),T=w(h),O=n(h,"LI",{class:!0});var Y=f(O);m=n(Y,"I",{class:!0}),f(m).forEach(s),Y.forEach(s),y=w(h),b=n(h,"LI",{class:!0});var v=f(b);I=n(v,"BUTTON",{class:!0});var R=f(I);B=n(R,"I",{class:!0}),f(B).forEach(s),R.forEach(s),v.forEach(s),h.forEach(s),A=w(k),this.h()},h(){r(l,"class","list-group-item list-group-item flex-fill"),r(g,"class","fa-solid fa-plus"),r(u,"class","list-group-item list-group-item"),r(m,"class","fa-solid fa-minus"),r(O,"class","list-group-item list-group-item-danger"),r(B,"class","fa fa-times"),r(I,"class","btn btn-default btn-sm px-0 py-0"),r(b,"class","list-group-item list-group-item"),r(e,"class","list-group list-group-horizontal py-md-1")},m(k,h){F(k,e,h),t(e,l),t(l,c),t(e,d),t(e,u),t(u,g),t(e,T),t(e,O),t(O,m),t(e,y),t(e,b),t(b,I),t(I,B),F(k,A,h),S||($=le(I,"click",G),S=!0)},p(k,h){a=k,h&32&&o!==(o=a[21].string+"")&&ue(c,o)},d(k){k&&s(e),k&&s(A),S=!1,$()}}}function ut(a){let e,l,o=a[21].string+"",c,d,u,g,T,O,m,y,b,I,B,A,S,$;function G(){return a[13](a[21])}return{c(){e=i("div"),l=i("li"),c=V(o),d=L(),u=i("li"),g=i("i"),T=L(),O=i("li"),m=i("i"),y=L(),b=i("li"),I=i("button"),B=i("i"),A=L(),this.h()},l(k){e=n(k,"DIV",{class:!0});var h=f(e);l=n(h,"LI",{class:!0});var C=f(l);c=H(C,o),C.forEach(s),d=w(h),u=n(h,"LI",{class:!0});var q=f(u);g=n(q,"I",{class:!0}),f(g).forEach(s),q.forEach(s),T=w(h),O=n(h,"LI",{class:!0});var Y=f(O);m=n(Y,"I",{class:!0}),f(m).forEach(s),Y.forEach(s),y=w(h),b=n(h,"LI",{class:!0});var v=f(b);I=n(v,"BUTTON",{class:!0});var R=f(I);B=n(R,"I",{class:!0}),f(B).forEach(s),R.forEach(s),v.forEach(s),h.forEach(s),A=w(k),this.h()},h(){r(l,"class","list-group-item list-group-item flex-fill"),r(g,"class","fa-solid fa-plus"),r(u,"class","list-group-item list-group-item-primary"),r(m,"class","fa-solid fa-minus"),r(O,"class","list-group-item list-group-item"),r(B,"class","fa fa-times"),r(I,"class","btn btn-default btn-sm px-0 py-0"),r(b,"class","list-group-item list-group-item"),r(e,"class","list-group list-group-horizontal py-md-1")},m(k,h){F(k,e,h),t(e,l),t(l,c),t(e,d),t(e,u),t(u,g),t(e,T),t(e,O),t(O,m),t(e,y),t(e,b),t(b,I),t(I,B),F(k,A,h),S||($=le(I,"click",G),S=!0)},p(k,h){a=k,h&32&&o!==(o=a[21].string+"")&&ue(c,o)},d(k){k&&s(e),k&&s(A),S=!1,$()}}}function qe(a){let e;function l(d,u){if(d[21].label=="+")return ut;if(d[21].label=="-")return ct}let o=l(a),c=o&&o(a);return{c(){c&&c.c(),e=Ye()},l(d){c&&c.l(d),e=Ye()},m(d,u){c&&c.m(d,u),F(d,e,u)},p(d,u){o===(o=l(d))&&c?c.p(d,u):(c&&c.d(1),c=o&&o(d),c&&(c.c(),c.m(e.parentNode,e)))},d(d){c&&c.d(d),d&&s(e)}}}function Ge(a){let e,l,o,c,d;return{c(){e=i("div"),l=i("button"),o=V("Submit"),this.h()},l(u){e=n(u,"DIV",{class:!0});var g=f(e);l=n(g,"BUTTON",{class:!0});var T=f(l);o=H(T,"Submit"),T.forEach(s),g.forEach(s),this.h()},h(){r(l,"class","btn btn-success btn-lg float-end"),r(e,"class","col-lg-6 py-md-5")},m(u,g){F(u,e,g),t(e,l),t(l,o),c||(d=le(l,"click",a[8]),c=!0)},p:tt,d(u){u&&s(e),c=!1,d()}}}function ft(a){let e,l,o,c,d,u,g,T,O,m,y,b,I,B,A,S,$,G,k,h,C,q,Y,v,R,D,_,X,se,ie,J,me,U,_e,W,ne,ge,j,ve,Z,ce,be,ae,K,Ee,ye,re,x,ke,fe,ee,te,Ie,Be,oe=a[5],M=[];for(let p=0;p<oe.length;p+=1)M[p]=qe(ze(a,oe,p));let P=a[5].length>=5&&Ge(a);return ee=new nt({}),{c(){e=i("div"),l=i("div"),o=i("h4"),c=V("Completed "),d=V(a[1]),u=V(" of "),g=V(a[0]),T=V(" tasks in this phase"),O=L(),m=i("div"),y=i("h2"),b=V("You are now the describer"),I=L(),B=i("p"),A=V("Here, you are presented with a regular expression. You need to provide a set of examples that "),S=i("em"),$=V("describes"),G=V(" this regular expression to a guesser. Enter at least 5 examples."),k=L(),h=i("div"),C=i("h2"),q=V("Regex: "),Y=i("tt"),v=V(a[2]),R=L(),D=i("div"),_=i("div"),X=i("span"),se=V("Enter example"),ie=L(),J=i("input"),me=L(),U=i("input"),_e=L(),W=i("label"),ne=i("i"),ge=L(),j=i("input"),ve=L(),Z=i("label"),ce=i("i"),be=L(),ae=i("div"),K=i("button"),Ee=V("Add"),ye=L(),re=i("div"),x=i("ul");for(let p=0;p<M.length;p+=1)M[p].c();ke=L(),P&&P.c(),fe=L(),Fe(ee.$$.fragment),this.h()},l(p){e=n(p,"DIV",{class:!0});var E=f(e);l=n(E,"DIV",{class:!0});var N=f(l);o=n(N,"H4",{});var Q=f(o);c=H(Q,"Completed "),d=H(Q,a[1]),u=H(Q," of "),g=H(Q,a[0]),T=H(Q," tasks in this phase"),Q.forEach(s),N.forEach(s),O=w(E),m=n(E,"DIV",{class:!0});var Ne=f(m);y=n(Ne,"H2",{});var Ue=f(y);b=H(Ue,"You are now the describer"),Ue.forEach(s),Ne.forEach(s),I=w(E),B=n(E,"P",{});var de=f(B);A=H(de,"Here, you are presented with a regular expression. You need to provide a set of examples that "),S=n(de,"EM",{});var je=f(S);$=H(je,"describes"),je.forEach(s),G=H(de," this regular expression to a guesser. Enter at least 5 examples."),de.forEach(s),k=w(E),h=n(E,"DIV",{class:!0});var Ae=f(h);C=n(Ae,"H2",{});var Te=f(C);q=H(Te,"Regex: "),Y=n(Te,"TT",{});var De=f(Y);v=H(De,a[2]),De.forEach(s),Te.forEach(s),Ae.forEach(s),R=w(E),D=n(E,"DIV",{class:!0});var he=f(D);_=n(he,"DIV",{class:!0});var z=f(_);X=n(z,"SPAN",{class:!0});var Me=f(X);se=H(Me,"Enter example"),Me.forEach(s),ie=w(z),J=n(z,"INPUT",{type:!0,class:!0}),me=w(z),U=n(z,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),_e=w(z),W=n(z,"LABEL",{class:!0,for:!0});var Pe=f(W);ne=n(Pe,"I",{class:!0}),f(ne).forEach(s),Pe.forEach(s),ge=w(z),j=n(z,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),ve=w(z),Z=n(z,"LABEL",{class:!0,for:!0});var Ve=f(Z);ce=n(Ve,"I",{class:!0}),f(ce).forEach(s),Ve.forEach(s),z.forEach(s),be=w(he),ae=n(he,"DIV",{class:!0});var He=f(ae);K=n(He,"BUTTON",{type:!0,class:!0});var Se=f(K);Ee=H(Se,"Add"),Se.forEach(s),He.forEach(s),he.forEach(s),ye=w(E),re=n(E,"DIV",{class:!0});var Re=f(re);x=n(Re,"UL",{class:!0});var Ce=f(x);for(let Oe=0;Oe<M.length;Oe+=1)M[Oe].l(Ce);Ce.forEach(s),Re.forEach(s),ke=w(E),P&&P.l(E),fe=w(E),Ke(ee.$$.fragment,E),E.forEach(s),this.h()},h(){r(l,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),r(m,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),r(h,"class","col-lg-10 py-md-3"),r(X,"class","input-group-text"),r(J,"type","text"),r(J,"class","form-control"),r(U,"type","radio"),r(U,"class","btn-check"),r(U,"name","utterance-type"),U.__value="+",U.value=U.__value,r(U,"id","positive"),r(U,"autocomplete","off"),a[11][0].push(U),r(ne,"class","fa-solid fa-plus"),r(W,"class","btn btn-outline-primary"),r(W,"for","positive"),r(j,"type","radio"),r(j,"class","btn-check"),r(j,"name","utterance-type"),j.__value="-",j.value=j.__value,r(j,"id","negative"),r(j,"autocomplete","off"),a[11][0].push(j),r(ce,"class","fa-solid fa-minus"),r(Z,"class","btn btn-outline-danger"),r(Z,"for","negative"),r(_,"class","input-group col"),r(K,"type","submit"),r(K,"class","btn btn-primary col-auto"),r(ae,"class","col"),r(D,"class","row gx-1"),r(x,"class","list-group"),r(re,"class","col-lg-6 py-md-5"),r(e,"class","col-lg-10 mx-auto p-3 py-md-5")},m(p,E){F(p,e,E),t(e,l),t(l,o),t(o,c),t(o,d),t(o,u),t(o,g),t(o,T),t(e,O),t(e,m),t(m,y),t(y,b),t(e,I),t(e,B),t(B,A),t(B,S),t(S,$),t(B,G),t(e,k),t(e,h),t(h,C),t(C,q),t(C,Y),t(Y,v),t(e,R),t(e,D),t(D,_),t(_,X),t(X,se),t(_,ie),t(_,J),$e(J,a[3]),t(_,me),t(_,U),U.checked=U.__value===a[4],t(_,_e),t(_,W),t(W,ne),t(_,ge),t(_,j),j.checked=j.__value===a[4],t(_,ve),t(_,Z),t(Z,ce),t(D,be),t(D,ae),t(ae,K),t(K,Ee),t(e,ye),t(e,re),t(re,x);for(let N=0;N<M.length;N+=1)M[N].m(x,null);t(e,ke),P&&P.m(e,null),t(e,fe),We(ee,e,null),te=!0,Ie||(Be=[le(J,"input",a[9]),le(U,"change",a[10]),le(j,"change",a[12]),le(K,"click",a[6])],Ie=!0)},p(p,[E]){if((!te||E&2)&&ue(d,p[1]),(!te||E&1)&&ue(g,p[0]),(!te||E&4)&&ue(v,p[2]),E&8&&J.value!==p[3]&&$e(J,p[3]),E&16&&(U.checked=U.__value===p[4]),E&16&&(j.checked=j.__value===p[4]),E&160){oe=p[5];let N;for(N=0;N<oe.length;N+=1){const Q=ze(p,oe,N);M[N]?M[N].p(Q,E):(M[N]=qe(Q),M[N].c(),M[N].m(x,null))}for(;N<M.length;N+=1)M[N].d(1);M.length=oe.length}p[5].length>=5?P?P.p(p,E):(P=Ge(p),P.c(),P.m(e,fe)):P&&(P.d(1),P=null)},i(p){te||(Ze(ee.$$.fragment,p),te=!0)},o(p){xe(ee.$$.fragment,p),te=!1},d(p){p&&s(e),a[11][0].splice(a[11][0].indexOf(U),1),a[11][0].splice(a[11][0].indexOf(j),1),lt(M,p),P&&P.d(),et(ee),Ie=!1,st(Be)}}}function dt(a,e){return a=Math.ceil(a),e=Math.floor(e),Math.floor(Math.random()*(e-a)+a)}function ht(a,e,l){let o;at(a,it,v=>l(19,o=v));let c=[],d=1,u=3,g=0,T="",O="",m="",y=null,b=[],I=0;function B(){if(c=[...c,{string:m,label:y,id:I}],m.length>0)if(y===null){pe.push("Label not provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}else{for(var v of b)if(m==v.string){pe.push("This example has already been provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}if(y=="+"&&m.match(`^${T}$`))l(5,b=[...b,{string:m,label:y,id:I}]),l(3,m=""),l(4,y=null),I+=1;else if(y=="-"&&!m.match(`^${T}$`))l(5,b=[...b,{string:m,label:y,id:I}]),l(3,m=""),l(4,y=null),I+=1;else{pe.push("Label does not match string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}}else{pe.push("Please enter a valid string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}}function A(v){l(5,b=b.filter(R=>R.id!=v))}async function S(){console.log(O),await fetch(`https://try-regex-default-rtdb.firebaseio.com/heldout-describe-pilot/${O}/descriptions/${o}.json`,{method:"PUT",body:JSON.stringify(b)}),l(5,b=[]),await $().then(v=>{})}async function $(){o.length==0&&Le(`${we}/annotate/login`);let v=await fetch("https://try-regex-default-rtdb.firebaseio.com/heldout-describe-pilot.json").then(ie=>ie.json()),R=new Object,D=new Object;for(var _ in v)v[_].hasOwnProperty("descriptions")?(v[_].descriptions.hasOwnProperty(o)&&(R[_]=v[_]),Object.keys(v[_].descriptions).length<d&&(D[_]=v[_])):D[_]=v[_];Object.keys(R).length>u&&Le(`${we}/annotate/finish`),Object.keys(D).length==0&&Le(`${we}/annotate/finish`),l(1,g=Object.keys(R).length);let X=dt(0,Object.keys(D).length);console.log(X);let se=0;for(var _ in D){if(se==X){O=_,l(2,T=D[_].program),console.log(_,D[_]),console.log(O,T);return}se+=1}}rt($);const G=[[]];function k(){m=this.value,l(3,m)}function h(){y=this.__value,l(4,y)}function C(){y=this.__value,l(4,y)}return[u,g,T,m,y,b,B,A,S,k,h,G,C,v=>A(v.id),v=>A(v.id)]}class pt extends Xe{constructor(e){super(),Je(this,e,ht,ft,Qe,{})}}function mt(a){let e,l,o,c,d;return c=new pt({}),{c(){e=i("meta"),l=L(),o=i("main"),Fe(c.$$.fragment),this.h()},l(u){const g=ot("svelte-jy85c7",document.head);e=n(g,"META",{name:!0,content:!0}),g.forEach(s),l=w(u),o=n(u,"MAIN",{});var T=f(o);Ke(c.$$.fragment,T),T.forEach(s),this.h()},h(){document.title="Regex from Examples",r(e,"name","description"),r(e,"content","Collect examples of examples used to communicate about regexes")},m(u,g){t(document.head,e),F(u,l,g),F(u,o,g),We(c,o,null),d=!0},p:tt,i(u){d||(Ze(c.$$.fragment,u),d=!0)},o(u){xe(c.$$.fragment,u),d=!1},d(u){s(e),u&&s(l),u&&s(o),et(c)}}}class kt extends Xe{constructor(e){super(),Je(this,e,null,mt,Qe,{})}}export{kt as default};
