import{S as Ke,i as We,s as Ze,k as n,q as A,a as L,w as xe,l as c,m as f,r as D,h as a,c as w,x as et,n as r,b as W,G as t,T as qe,y as tt,I as ae,u as he,f as lt,t as st,U as ot,z as at,L as it,H as nt,o as ct,e as Ge,B as rt,Q as ut}from"../../../../chunks/index-0e9e634d.js";import{g as we}from"../../../../chunks/navigation-c15f7844.js";import{u as ft,d as Ne}from"../../../../chunks/store-b95407d5.js";import{d as Ue}from"../../../../chunks/singletons-69107a7c.js";import{S as dt}from"../../../../chunks/SvelteToast-ff19346a.js";import{t as de}from"../../../../chunks/stores-3e1ed05a.js";function Je(l,e,s){const o=l.slice();return o[22]=e[s],o}function ht(l){let e,s,o=l[22].string+"",i,d,u,_,T,O,m,E,v,y,I,V,M,Y;function G(){return l[15](l[22])}return{c(){e=n("div"),s=n("li"),i=A(o),d=L(),u=n("li"),_=n("i"),T=L(),O=n("li"),m=n("i"),E=L(),v=n("li"),y=n("button"),I=n("i"),V=L(),this.h()},l(k){e=c(k,"DIV",{class:!0});var h=f(e);s=c(h,"LI",{class:!0});var z=f(s);i=D(z,o),z.forEach(a),d=w(h),u=c(h,"LI",{class:!0});var $=f(u);_=c($,"I",{class:!0}),f(_).forEach(a),$.forEach(a),T=w(h),O=c(h,"LI",{class:!0});var R=f(O);m=c(R,"I",{class:!0}),f(m).forEach(a),R.forEach(a),E=w(h),v=c(h,"LI",{class:!0});var J=f(v);y=c(J,"BUTTON",{class:!0});var g=f(y);I=c(g,"I",{class:!0}),f(I).forEach(a),g.forEach(a),J.forEach(a),h.forEach(a),V=w(k),this.h()},h(){r(s,"class","list-group-item list-group-item flex-fill"),r(_,"class","fa-solid fa-plus"),r(u,"class","list-group-item list-group-item"),r(m,"class","fa-solid fa-minus"),r(O,"class","list-group-item list-group-item-danger"),r(I,"class","fa fa-times"),r(y,"class","btn btn-default btn-sm px-0 py-0"),r(v,"class","list-group-item list-group-item"),r(e,"class","list-group list-group-horizontal py-md-1")},m(k,h){W(k,e,h),t(e,s),t(s,i),t(e,d),t(e,u),t(u,_),t(e,T),t(e,O),t(O,m),t(e,E),t(e,v),t(v,y),t(y,I),W(k,V,h),M||(Y=ae(y,"click",G),M=!0)},p(k,h){l=k,h&32&&o!==(o=l[22].string+"")&&he(i,o)},d(k){k&&a(e),k&&a(V),M=!1,Y()}}}function pt(l){let e,s,o=l[22].string+"",i,d,u,_,T,O,m,E,v,y,I,V,M,Y;function G(){return l[14](l[22])}return{c(){e=n("div"),s=n("li"),i=A(o),d=L(),u=n("li"),_=n("i"),T=L(),O=n("li"),m=n("i"),E=L(),v=n("li"),y=n("button"),I=n("i"),V=L(),this.h()},l(k){e=c(k,"DIV",{class:!0});var h=f(e);s=c(h,"LI",{class:!0});var z=f(s);i=D(z,o),z.forEach(a),d=w(h),u=c(h,"LI",{class:!0});var $=f(u);_=c($,"I",{class:!0}),f(_).forEach(a),$.forEach(a),T=w(h),O=c(h,"LI",{class:!0});var R=f(O);m=c(R,"I",{class:!0}),f(m).forEach(a),R.forEach(a),E=w(h),v=c(h,"LI",{class:!0});var J=f(v);y=c(J,"BUTTON",{class:!0});var g=f(y);I=c(g,"I",{class:!0}),f(I).forEach(a),g.forEach(a),J.forEach(a),h.forEach(a),V=w(k),this.h()},h(){r(s,"class","list-group-item list-group-item flex-fill"),r(_,"class","fa-solid fa-plus"),r(u,"class","list-group-item list-group-item-primary"),r(m,"class","fa-solid fa-minus"),r(O,"class","list-group-item list-group-item"),r(I,"class","fa fa-times"),r(y,"class","btn btn-default btn-sm px-0 py-0"),r(v,"class","list-group-item list-group-item"),r(e,"class","list-group list-group-horizontal py-md-1")},m(k,h){W(k,e,h),t(e,s),t(s,i),t(e,d),t(e,u),t(u,_),t(e,T),t(e,O),t(O,m),t(e,E),t(e,v),t(v,y),t(y,I),W(k,V,h),M||(Y=ae(y,"click",G),M=!0)},p(k,h){l=k,h&32&&o!==(o=l[22].string+"")&&he(i,o)},d(k){k&&a(e),k&&a(V),M=!1,Y()}}}function Xe(l){let e;function s(d,u){if(d[22].label=="+")return pt;if(d[22].label=="-")return ht}let o=s(l),i=o&&o(l);return{c(){i&&i.c(),e=Ge()},l(d){i&&i.l(d),e=Ge()},m(d,u){i&&i.m(d,u),W(d,e,u)},p(d,u){o===(o=s(d))&&i?i.p(d,u):(i&&i.d(1),i=o&&o(d),i&&(i.c(),i.m(e.parentNode,e)))},d(d){i&&i.d(d),d&&a(e)}}}function Qe(l){let e,s,o,i,d;return{c(){e=n("div"),s=n("button"),o=A("Submit"),this.h()},l(u){e=c(u,"DIV",{class:!0});var _=f(e);s=c(_,"BUTTON",{class:!0});var T=f(s);o=D(T,"Submit"),T.forEach(a),_.forEach(a),this.h()},h(){r(s,"class","btn btn-success btn-lg float-end"),r(e,"class","col-lg-6 py-md-5")},m(u,_){W(u,e,_),t(e,s),t(s,o),i||(d=ae(s,"click",l[9]),i=!0)},p:rt,d(u){u&&a(e),i=!1,d()}}}function mt(l){let e,s,o,i,d,u,_,T,O,m,E,v,y,I,V,M,Y,G,k,h,z,$,R,J,g,X,q,B,N,Q,ce,_e,F,ge,P,ve,x,ue,be,j,Ee,ee,fe,ke,re,Z,ye,Ie,oe,te,Te,pe,le,se,Oe,Pe,ie=l[5],H=[];for(let p=0;p<ie.length;p+=1)H[p]=Xe(Je(l,ie,p));let S=l[5].length>=l[6]&&Qe(l);return le=new dt({}),{c(){e=n("div"),s=n("div"),o=n("h4"),i=A("Completed "),d=A(l[1]),u=A(" of "),_=A(l[0]),T=A(" tasks in this phase"),O=L(),m=n("div"),E=n("h2"),v=A("You are now the describer"),y=L(),I=n("p"),V=A("Here, you are presented with a regular expression. You need to provide a set of examples that "),M=n("em"),Y=A("describes"),G=A(" this regular expression to a guesser. Enter at least "),k=A(l[6]),h=A(" examples."),z=L(),$=n("div"),R=n("h2"),J=A("Regex: "),g=n("tt"),X=A(l[2]),q=L(),B=n("div"),N=n("div"),Q=n("span"),ce=A("Enter example"),_e=L(),F=n("input"),ge=L(),P=n("input"),ve=L(),x=n("label"),ue=n("i"),be=L(),j=n("input"),Ee=L(),ee=n("label"),fe=n("i"),ke=L(),re=n("div"),Z=n("button"),ye=A("Add"),Ie=L(),oe=n("div"),te=n("ul");for(let p=0;p<H.length;p+=1)H[p].c();Te=L(),S&&S.c(),pe=L(),xe(le.$$.fragment),this.h()},l(p){e=c(p,"DIV",{class:!0});var b=f(e);s=c(b,"DIV",{class:!0});var U=f(s);o=c(U,"H4",{});var K=f(o);i=D(K,"Completed "),d=D(K,l[1]),u=D(K," of "),_=D(K,l[0]),T=D(K," tasks in this phase"),K.forEach(a),U.forEach(a),O=w(b),m=c(b,"DIV",{class:!0});var je=f(m);E=c(je,"H2",{});var Ae=f(E);v=D(Ae,"You are now the describer"),Ae.forEach(a),je.forEach(a),y=w(b),I=c(b,"P",{});var ne=f(I);V=D(ne,"Here, you are presented with a regular expression. You need to provide a set of examples that "),M=c(ne,"EM",{});var De=f(M);Y=D(De,"describes"),De.forEach(a),G=D(ne," this regular expression to a guesser. Enter at least "),k=D(ne,l[6]),h=D(ne," examples."),ne.forEach(a),z=w(b),$=c(b,"DIV",{class:!0});var Me=f($);R=c(Me,"H2",{});var Be=f(R);J=D(Be,"Regex: "),g=c(Be,"TT",{});var He=f(g);X=D(He,l[2]),He.forEach(a),Be.forEach(a),Me.forEach(a),q=w(b),B=c(b,"DIV",{class:!0});var me=f(B);N=c(me,"DIV",{class:!0});var C=f(N);Q=c(C,"SPAN",{class:!0});var Se=f(Q);ce=D(Se,"Enter example"),Se.forEach(a),_e=w(C),F=c(C,"INPUT",{type:!0,class:!0}),ge=w(C),P=c(C,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),ve=w(C),x=c(C,"LABEL",{class:!0,for:!0});var Ve=f(x);ue=c(Ve,"I",{class:!0}),f(ue).forEach(a),Ve.forEach(a),be=w(C),j=c(C,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),Ee=w(C),ee=c(C,"LABEL",{class:!0,for:!0});var $e=f(ee);fe=c($e,"I",{class:!0}),f(fe).forEach(a),$e.forEach(a),C.forEach(a),ke=w(me),re=c(me,"DIV",{class:!0});var Re=f(re);Z=c(Re,"BUTTON",{type:!0,class:!0});var Ce=f(Z);ye=D(Ce,"Add"),Ce.forEach(a),Re.forEach(a),me.forEach(a),Ie=w(b),oe=c(b,"DIV",{class:!0});var Ye=f(oe);te=c(Ye,"UL",{class:!0});var ze=f(te);for(let Le=0;Le<H.length;Le+=1)H[Le].l(ze);ze.forEach(a),Ye.forEach(a),Te=w(b),S&&S.l(b),pe=w(b),et(le.$$.fragment,b),b.forEach(a),this.h()},h(){r(s,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),r(m,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),r($,"class","col-lg-10 py-md-3"),r(Q,"class","input-group-text"),r(F,"type","text"),r(F,"class","form-control"),r(P,"type","radio"),r(P,"class","btn-check"),r(P,"name","utterance-type"),P.__value="+",P.value=P.__value,r(P,"id","positive"),r(P,"autocomplete","off"),l[12][0].push(P),r(ue,"class","fa-solid fa-plus"),r(x,"class","btn btn-outline-primary"),r(x,"for","positive"),r(j,"type","radio"),r(j,"class","btn-check"),r(j,"name","utterance-type"),j.__value="-",j.value=j.__value,r(j,"id","negative"),r(j,"autocomplete","off"),l[12][0].push(j),r(fe,"class","fa-solid fa-minus"),r(ee,"class","btn btn-outline-danger"),r(ee,"for","negative"),r(N,"class","input-group col"),r(Z,"type","submit"),r(Z,"class","btn btn-primary col-auto"),r(re,"class","col"),r(B,"class","row gx-1"),r(te,"class","list-group"),r(oe,"class","col-lg-6 py-md-5"),r(e,"class","col-lg-10 mx-auto p-3 py-md-5")},m(p,b){W(p,e,b),t(e,s),t(s,o),t(o,i),t(o,d),t(o,u),t(o,_),t(o,T),t(e,O),t(e,m),t(m,E),t(E,v),t(e,y),t(e,I),t(I,V),t(I,M),t(M,Y),t(I,G),t(I,k),t(I,h),t(e,z),t(e,$),t($,R),t(R,J),t(R,g),t(g,X),t(e,q),t(e,B),t(B,N),t(N,Q),t(Q,ce),t(N,_e),t(N,F),qe(F,l[3]),t(N,ge),t(N,P),P.checked=P.__value===l[4],t(N,ve),t(N,x),t(x,ue),t(N,be),t(N,j),j.checked=j.__value===l[4],t(N,Ee),t(N,ee),t(ee,fe),t(B,ke),t(B,re),t(re,Z),t(Z,ye),t(e,Ie),t(e,oe),t(oe,te);for(let U=0;U<H.length;U+=1)H[U].m(te,null);t(e,Te),S&&S.m(e,null),t(e,pe),tt(le,e,null),se=!0,Oe||(Pe=[ae(F,"input",l[10]),ae(P,"change",l[11]),ae(j,"change",l[13]),ae(Z,"click",l[7])],Oe=!0)},p(p,[b]){if((!se||b&2)&&he(d,p[1]),(!se||b&1)&&he(_,p[0]),(!se||b&4)&&he(X,p[2]),b&8&&F.value!==p[3]&&qe(F,p[3]),b&16&&(P.checked=P.__value===p[4]),b&16&&(j.checked=j.__value===p[4]),b&288){ie=p[5];let U;for(U=0;U<ie.length;U+=1){const K=Je(p,ie,U);H[U]?H[U].p(K,b):(H[U]=Xe(K),H[U].c(),H[U].m(te,null))}for(;U<H.length;U+=1)H[U].d(1);H.length=ie.length}p[5].length>=p[6]?S?S.p(p,b):(S=Qe(p),S.c(),S.m(e,pe)):S&&(S.d(1),S=null)},i(p){se||(lt(le.$$.fragment,p),se=!0)},o(p){st(le.$$.fragment,p),se=!1},d(p){p&&a(e),l[12][0].splice(l[12][0].indexOf(P),1),l[12][0].splice(l[12][0].indexOf(j),1),ot(H,p),S&&S.d(),at(le),Oe=!1,it(Pe)}}}function Fe(l,e){return l=Math.ceil(l),e=Math.floor(e),Math.floor(Math.random()*(e-l)+l)}function _t(l,e,s){let o;nt(l,ft,g=>s(20,o=g));let i=[],d=1,u=40,_=0,T="",O="",m="",E=null,v=[],y=0,I=Fe(5,7);function V(){if(i=[...i,{string:m,label:E,id:y}],m.length>0)if(E===null){de.push("Label not provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}else{for(var g of v)if(m==g.string){de.push("This example has already been provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}if(E=="+"&&m.match(`^${T}$`))s(5,v=[...v,{string:m,label:E,id:y}]),s(3,m=""),s(4,E=null),y+=1;else if(E=="-"&&!m.match(`^${T}$`))s(5,v=[...v,{string:m,label:E,id:y}]),s(3,m=""),s(4,E=null),y+=1;else{de.push("Label does not match string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}}else{de.push("Please enter a valid string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}}function M(g){s(5,v=v.filter(X=>X.id!=g))}async function Y(){if(v.length<I){de.push("Please provide more examples",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}console.log(O),await fetch(`${Ne}/describe-programs/${O}/descriptions/${o}.json`,{method:"PUT",body:JSON.stringify(v)}),await fetch(`${Ne}/event-logs/${O}/${o}.json`,{method:"PUT",body:JSON.stringify(i)}),s(5,v=[]),await G().then(g=>{})}async function G(){o.length==0&&we(`${Ue}/annotate/login`);let g=await fetch(`${Ne}/describe-programs.json`).then(ce=>ce.json()),X=new Object,q=new Object;for(var B in g)g[B].hasOwnProperty("descriptions")?g[B].descriptions.hasOwnProperty(o)?X[B]=g[B]:Object.keys(g[B].descriptions).length<d&&(q[B]=g[B]):q[B]=g[B];Object.keys(X).length>=u&&we(`${Ue}/annotate/finish`),Object.keys(q).length==0&&we(`${Ue}/annotate/finish`),s(1,_=Object.keys(X).length);let N=Fe(0,Object.keys(q).length);console.log(N);let Q=0;for(var B in q){if(Q==N){O=B,s(2,T=q[B].program),console.log(B,q[B]),console.log(O,T);return}Q+=1}}ct(G);const k=[[]];function h(){m=this.value,s(3,m)}function z(){E=this.__value,s(4,E)}function $(){E=this.__value,s(4,E)}return[u,_,T,m,E,v,I,V,M,Y,h,z,k,$,g=>M(g.id),g=>M(g.id)]}class gt extends Ke{constructor(e){super(),We(this,e,_t,mt,Ze,{})}}function vt(l){let e,s,o,i,d;return i=new gt({}),{c(){e=n("meta"),s=L(),o=n("main"),xe(i.$$.fragment),this.h()},l(u){const _=ut("svelte-jy85c7",document.head);e=c(_,"META",{name:!0,content:!0}),_.forEach(a),s=w(u),o=c(u,"MAIN",{});var T=f(o);et(i.$$.fragment,T),T.forEach(a),this.h()},h(){document.title="Regex from Examples",r(e,"name","description"),r(e,"content","Collect examples of examples used to communicate about regexes")},m(u,_){t(document.head,e),W(u,s,_),W(u,o,_),tt(i,o,null),d=!0},p:rt,i(u){d||(lt(i.$$.fragment,u),d=!0)},o(u){st(i.$$.fragment,u),d=!1},d(u){a(e),u&&a(s),u&&a(o),at(i)}}}class Ot extends Ke{constructor(e){super(),We(this,e,null,vt,Ze,{})}}export{Ot as default};
