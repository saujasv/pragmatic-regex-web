import{S as ie,i as ce,s as ue,k as f,q as B,a as O,w as he,l as d,m,r as N,h as c,c as A,x as fe,n as p,b as U,G as r,y as de,u as G,f as pe,t as _e,U as ve,z as me,H as ye,o as be,e as re,p as F,T as ae,I as K,L as Ee,B as ge,Q as ke}from"../../../chunks/index-0e9e634d.js";import"../../../chunks/navigation-c15f7844.js";import{u as Ie}from"../../../chunks/store-b95407d5.js";import{S as we}from"../../../chunks/SvelteToast-ff19346a.js";import{t as W}from"../../../chunks/stores-3e1ed05a.js";function oe(u,e,t){const a=u.slice();return a[21]=e[t],a}function Te(u){let e,t,a,l,i;return{c(){e=f("div"),t=f("h2"),a=B("Literal system's guess: "),l=f("tt"),i=B(u[4]),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=m(e);t=d(o,"H2",{});var n=m(t);a=N(n,"Literal system's guess: "),l=d(n,"TT",{style:!0});var _=m(l);i=N(_,u[4]),_.forEach(c),n.forEach(c),o.forEach(c),this.h()},h(){F(l,"color","red"),p(e,"class","col-lg-10 py-md-3")},m(s,o){U(s,e,o),r(e,t),r(t,a),r(t,l),r(l,i)},p(s,o){o&16&&G(i,s[4])},d(s){s&&c(e)}}}function Le(u){let e,t,a,l,i;return{c(){e=f("div"),t=f("h2"),a=B("Literal system's guess: "),l=f("tt"),i=B(u[4]),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=m(e);t=d(o,"H2",{});var n=m(t);a=N(n,"Literal system's guess: "),l=d(n,"TT",{style:!0});var _=m(l);i=N(_,u[4]),_.forEach(c),n.forEach(c),o.forEach(c),this.h()},h(){F(l,"color","green"),p(e,"class","col-sm-10 py-md-3")},m(s,o){U(s,e,o),r(e,t),r(t,a),r(t,l),r(l,i)},p(s,o){o&16&&G(i,s[4])},d(s){s&&c(e)}}}function Pe(u){let e,t,a,l,i;return{c(){e=f("div"),t=f("h2"),a=B("PraX guess: "),l=f("tt"),i=B(u[6]),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=m(e);t=d(o,"H2",{});var n=m(t);a=N(n,"PraX guess: "),l=d(n,"TT",{style:!0});var _=m(l);i=N(_,u[6]),_.forEach(c),n.forEach(c),o.forEach(c),this.h()},h(){F(l,"color","red"),p(e,"class","col-lg-10 py-md-3")},m(s,o){U(s,e,o),r(e,t),r(t,a),r(t,l),r(l,i)},p(s,o){o&64&&G(i,s[6])},d(s){s&&c(e)}}}function Oe(u){let e,t,a,l,i;return{c(){e=f("div"),t=f("h2"),a=B("PraX guess: "),l=f("tt"),i=B(u[6]),this.h()},l(s){e=d(s,"DIV",{class:!0});var o=m(e);t=d(o,"H2",{});var n=m(t);a=N(n,"PraX guess: "),l=d(n,"TT",{style:!0});var _=m(l);i=N(_,u[6]),_.forEach(c),n.forEach(c),o.forEach(c),this.h()},h(){F(l,"color","green"),p(e,"class","col-lg-10 py-md-3")},m(s,o){U(s,e,o),r(e,t),r(t,a),r(t,l),r(l,i)},p(s,o){o&64&&G(i,s[6])},d(s){s&&c(e)}}}function Ae(u){let e,t,a,l,i,s,o,n,_,E,I,v,h,L,P,H,X,V,S,C,z,w;return{c(){e=f("div"),t=f("div"),a=f("span"),l=B("Enter example"),i=O(),s=f("input"),o=O(),n=f("input"),_=O(),E=f("label"),I=f("i"),v=O(),h=f("input"),L=O(),P=f("label"),H=f("i"),X=O(),V=f("div"),S=f("button"),C=B("Add"),this.h()},l(T){e=d(T,"DIV",{class:!0});var y=m(e);t=d(y,"DIV",{class:!0});var b=m(t);a=d(b,"SPAN",{class:!0});var q=m(a);l=N(q,"Enter example"),q.forEach(c),i=A(b),s=d(b,"INPUT",{type:!0,class:!0}),o=A(b),n=d(b,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),_=A(b),E=d(b,"LABEL",{class:!0,for:!0});var j=m(E);I=d(j,"I",{class:!0}),m(I).forEach(c),j.forEach(c),v=A(b),h=d(b,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),L=A(b),P=d(b,"LABEL",{class:!0,for:!0});var Y=m(P);H=d(Y,"I",{class:!0}),m(H).forEach(c),Y.forEach(c),b.forEach(c),X=A(y),V=d(y,"DIV",{class:!0});var x=m(V);S=d(x,"BUTTON",{type:!0,class:!0});var R=m(S);C=N(R,"Add"),R.forEach(c),x.forEach(c),y.forEach(c),this.h()},h(){p(a,"class","input-group-text"),p(s,"type","text"),p(s,"class","form-control"),p(n,"type","radio"),p(n,"class","btn-check"),p(n,"name","utterance-type"),n.__value="+",n.value=n.__value,p(n,"id","positive"),p(n,"autocomplete","off"),u[11][0].push(n),p(I,"class","fa-solid fa-plus"),p(E,"class","btn btn-outline-primary"),p(E,"for","positive"),p(h,"type","radio"),p(h,"class","btn-check"),p(h,"name","utterance-type"),h.__value="-",h.value=h.__value,p(h,"id","negative"),p(h,"autocomplete","off"),u[11][0].push(h),p(H,"class","fa-solid fa-minus"),p(P,"class","btn btn-outline-danger"),p(P,"for","negative"),p(t,"class","input-group col"),p(S,"type","submit"),p(S,"class","btn btn-primary col-auto"),p(V,"class","col"),p(e,"class","row gx-1")},m(T,y){U(T,e,y),r(e,t),r(t,a),r(a,l),r(t,i),r(t,s),ae(s,u[1]),r(t,o),r(t,n),n.checked=n.__value===u[2],r(t,_),r(t,E),r(E,I),r(t,v),r(t,h),h.checked=h.__value===u[2],r(t,L),r(t,P),r(P,H),r(e,X),r(e,V),r(V,S),r(S,C),z||(w=[K(s,"input",u[9]),K(n,"change",u[10]),K(h,"change",u[12]),K(S,"click",u[8])],z=!0)},p(T,y){y&2&&s.value!==T[1]&&ae(s,T[1]),y&4&&(n.checked=n.__value===T[2]),y&4&&(h.checked=h.__value===T[2])},d(T){T&&c(e),u[11][0].splice(u[11][0].indexOf(n),1),u[11][0].splice(u[11][0].indexOf(h),1),z=!1,Ee(w)}}}function De(u){let e,t;return{c(){e=f("h2"),t=B("Succeeded!"),this.h()},l(a){e=d(a,"H2",{style:!0});var l=m(e);t=N(l,"Succeeded!"),l.forEach(c),this.h()},h(){F(e,"color","green")},m(a,l){U(a,e,l),r(e,t)},p:ge,d(a){a&&c(e)}}}function He(u){let e,t,a=u[21].string+"",l,i,s,o,n,_,E,I;return{c(){e=f("div"),t=f("li"),l=B(a),i=O(),s=f("li"),o=f("i"),n=O(),_=f("li"),E=f("i"),I=O(),this.h()},l(v){e=d(v,"DIV",{class:!0});var h=m(e);t=d(h,"LI",{class:!0});var L=m(t);l=N(L,a),L.forEach(c),i=A(h),s=d(h,"LI",{class:!0});var P=m(s);o=d(P,"I",{class:!0}),m(o).forEach(c),P.forEach(c),n=A(h),_=d(h,"LI",{class:!0});var H=m(_);E=d(H,"I",{class:!0}),m(E).forEach(c),H.forEach(c),h.forEach(c),I=A(v),this.h()},h(){p(t,"class","list-group-item list-group-item flex-fill"),p(o,"class","fa-solid fa-plus"),p(s,"class","list-group-item list-group-item"),p(E,"class","fa-solid fa-minus"),p(_,"class","list-group-item list-group-item-danger"),p(e,"class","list-group list-group-horizontal py-md-1")},m(v,h){U(v,e,h),r(e,t),r(t,l),r(e,i),r(e,s),r(s,o),r(e,n),r(e,_),r(_,E),U(v,I,h)},p(v,h){h&8&&a!==(a=v[21].string+"")&&G(l,a)},d(v){v&&c(e),v&&c(I)}}}function je(u){let e,t,a=u[21].string+"",l,i,s,o,n,_,E,I;return{c(){e=f("div"),t=f("li"),l=B(a),i=O(),s=f("li"),o=f("i"),n=O(),_=f("li"),E=f("i"),I=O(),this.h()},l(v){e=d(v,"DIV",{class:!0});var h=m(e);t=d(h,"LI",{class:!0});var L=m(t);l=N(L,a),L.forEach(c),i=A(h),s=d(h,"LI",{class:!0});var P=m(s);o=d(P,"I",{class:!0}),m(o).forEach(c),P.forEach(c),n=A(h),_=d(h,"LI",{class:!0});var H=m(_);E=d(H,"I",{class:!0}),m(E).forEach(c),H.forEach(c),h.forEach(c),I=A(v),this.h()},h(){p(t,"class","list-group-item list-group-item flex-fill"),p(o,"class","fa-solid fa-plus"),p(s,"class","list-group-item list-group-item-primary"),p(E,"class","fa-solid fa-minus"),p(_,"class","list-group-item list-group-item"),p(e,"class","list-group list-group-horizontal py-md-1")},m(v,h){U(v,e,h),r(e,t),r(t,l),r(e,i),r(e,s),r(s,o),r(e,n),r(e,_),r(_,E),U(v,I,h)},p(v,h){h&8&&a!==(a=v[21].string+"")&&G(l,a)},d(v){v&&c(e),v&&c(I)}}}function ne(u){let e;function t(i,s){if(i[21].label=="+")return je;if(i[21].label=="-")return He}let a=t(u),l=a&&a(u);return{c(){l&&l.c(),e=re()},l(i){l&&l.l(i),e=re()},m(i,s){l&&l.m(i,s),U(i,e,s)},p(i,s){a===(a=t(i))&&l?l.p(i,s):(l&&l.d(1),l=a&&a(i),l&&(l.c(),l.m(e.parentNode,e)))},d(i){l&&l.d(i),i&&c(e)}}}function Be(u){let e,t,a,l,i,s,o,n,_,E,I,v,h,L,P,H,X,V,S,C,z;function w(g,k){return g[5]?Le:Te}let T=w(u),y=T(u);function b(g,k){return g[7]?Oe:Pe}let q=b(u),j=q(u);function Y(g,k){return g[5]||g[7]?De:Ae}let x=Y(u),R=x(u),J=u[3],M=[];for(let g=0;g<J.length;g+=1)M[g]=ne(oe(u,J,g));return C=new we({}),{c(){e=f("div"),t=f("h1"),a=B("PraX demo"),l=O(),i=f("p"),s=B('Here, you are presented with a regular expression. You can interact with two systems and communicate the regular expression using examples. Each example is a string (which you can type in the text box) and an example (+ to indicate that the string should match the synthesized regex and - to indicate that it should not). Click "Add" once you have entered your example, and both systems will try to guess the regular expression. You can refresh to communite a different regular expression.'),o=O(),n=f("div"),_=f("h2"),E=B("Regex: "),I=f("tt"),v=B(u[0]),h=O(),y.c(),L=O(),j.c(),P=O(),R.c(),H=O(),X=f("div"),V=f("ul");for(let g=0;g<M.length;g+=1)M[g].c();S=O(),he(C.$$.fragment),this.h()},l(g){e=d(g,"DIV",{class:!0});var k=m(e);t=d(k,"H1",{});var D=m(t);a=N(D,"PraX demo"),D.forEach(c),l=A(k),i=d(k,"P",{});var Q=m(i);s=N(Q,'Here, you are presented with a regular expression. You can interact with two systems and communicate the regular expression using examples. Each example is a string (which you can type in the text box) and an example (+ to indicate that the string should match the synthesized regex and - to indicate that it should not). Click "Add" once you have entered your example, and both systems will try to guess the regular expression. You can refresh to communite a different regular expression.'),Q.forEach(c),o=A(k),n=d(k,"DIV",{class:!0});var ee=m(n);_=d(ee,"H2",{});var Z=m(_);E=N(Z,"Regex: "),I=d(Z,"TT",{});var te=m(I);v=N(te,u[0]),te.forEach(c),Z.forEach(c),ee.forEach(c),h=A(k),y.l(k),L=A(k),j.l(k),P=A(k),R.l(k),H=A(k),X=d(k,"DIV",{class:!0});var se=m(X);V=d(se,"UL",{class:!0});var le=m(V);for(let $=0;$<M.length;$+=1)M[$].l(le);le.forEach(c),se.forEach(c),S=A(k),fe(C.$$.fragment,k),k.forEach(c),this.h()},h(){p(n,"class","col-10 py-md-3"),p(V,"class","list-group"),p(X,"class","col-lg-6 py-md-5"),p(e,"class","col-lg-10 mx-auto p-3 py-md-5")},m(g,k){U(g,e,k),r(e,t),r(t,a),r(e,l),r(e,i),r(i,s),r(e,o),r(e,n),r(n,_),r(_,E),r(_,I),r(I,v),r(e,h),y.m(e,null),r(e,L),j.m(e,null),r(e,P),R.m(e,null),r(e,H),r(e,X),r(X,V);for(let D=0;D<M.length;D+=1)M[D].m(V,null);r(e,S),de(C,e,null),z=!0},p(g,[k]){if((!z||k&1)&&G(v,g[0]),T===(T=w(g))&&y?y.p(g,k):(y.d(1),y=T(g),y&&(y.c(),y.m(e,L))),q===(q=b(g))&&j?j.p(g,k):(j.d(1),j=q(g),j&&(j.c(),j.m(e,P))),x===(x=Y(g))&&R?R.p(g,k):(R.d(1),R=x(g),R&&(R.c(),R.m(e,H))),k&8){J=g[3];let D;for(D=0;D<J.length;D+=1){const Q=oe(g,J,D);M[D]?M[D].p(Q,k):(M[D]=ne(Q),M[D].c(),M[D].m(V,null))}for(;D<M.length;D+=1)M[D].d(1);M.length=J.length}},i(g){z||(pe(C.$$.fragment,g),z=!0)},o(g){_e(C.$$.fragment,g),z=!1},d(g){g&&c(e),y.d(),j.d(),R.d(),ve(M,g),me(C)}}}let Ne=1,Ve="https://qdkd8x0wqtlir789.us-east-1.aws.endpoints.huggingface.cloud",Me="https://r6fve43vkbl7ddj4.us-east-1.aws.endpoints.huggingface.cloud";function Se(u,e){return u=Math.ceil(u),e=Math.floor(e),Math.floor(Math.random()*(e-u)+u)}function Re(u,e,t){let a;ye(u,Ie,w=>t(16,a=w));let l=[],i="",s="",o="",n=null,_=[],E="",I=!1,v="",h=!1,L=0;function P(){if(l=[...l,{string:o,label:n,id:L}],o.length>0)if(n===null){W.push("Label not provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}else{for(var w of _)if(o==w.string){W.push("This example has already been provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}if(n=="+"&&o.match(`^${i}$`))t(3,_=[..._,{string:o,label:n,id:L}]),t(1,o=""),t(2,n=null),L+=1;else if(n=="-"&&!o.match(`^${i}$`))t(3,_=[..._,{string:o,label:n,id:L}]),t(1,o=""),t(2,n=null),L+=1;else{W.push("Label does not match string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}}else{W.push("Please enter a valid string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}H()}async function H(){t(4,E="...");let w=await fetch(Ve,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inputs:{true_program:i,spec:_}})}).then(y=>y.json());w&&(w.guess?t(4,E=w.guess):t(4,E="<regex not found>"),w.top_1_success&&t(5,I=!0)),t(6,v="...");let T=await fetch(Me,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inputs:{true_program:i,spec:_}})}).then(y=>y.json());T&&(T.guess?t(6,v=T.guess):t(6,v="<regex not found>"),T.top_1_success&&t(7,h=!0))}async function X(){let w=await fetch("https://regex-interact-default-rtdb.firebaseio.com/user_study.json").then(Y=>Y.json()),T=new Object,y=new Object;for(var b in w)if(w[b].hasOwnProperty("interaction")){let Y=!1;w[b].interaction.hasOwnProperty(a)&&w[b].interaction[a].hasOwnProperty("completed")&&w[b].interaction[a].completed&&(Y=!0),w[b].interaction.hasOwnProperty(a)&&Y&&(T[b]=w[b]),Object.keys(w[b].interaction).length<Ne&&(y[b]=w[b])}else y[b]=w[b];let q=Se(0,Object.keys(y).length);console.log(q);let j=0;for(var b in y){if(j==q){s=b,t(0,i=y[b].program),console.log(b,y[b]),console.log(s,i),t(4,E=""),t(5,I=!1),t(6,v=""),t(7,h=!1);return}j+=1}}be(X);const V=[[]];function S(){o=this.value,t(1,o)}function C(){n=this.__value,t(2,n)}function z(){n=this.__value,t(2,n)}return[i,o,n,_,E,I,v,h,P,S,C,V,z]}class Ue extends ie{constructor(e){super(),ce(this,e,Re,Be,ue,{})}}function Ce(u){let e,t,a,l,i;return l=new Ue({}),{c(){e=f("meta"),t=O(),a=f("main"),he(l.$$.fragment),this.h()},l(s){const o=ke("svelte-jy85c7",document.head);e=d(o,"META",{name:!0,content:!0}),o.forEach(c),t=A(s),a=d(s,"MAIN",{});var n=m(a);fe(l.$$.fragment,n),n.forEach(c),this.h()},h(){document.title="Regex from Examples",p(e,"name","description"),p(e,"content","Collect examples of examples used to communicate about regexes")},m(s,o){r(document.head,e),U(s,t,o),U(s,a,o),de(l,a,null),i=!0},p:ge,i(s){i||(pe(l.$$.fragment,s),i=!0)},o(s){_e(l.$$.fragment,s),i=!1},d(s){c(e),s&&c(t),s&&c(a),me(l)}}}class Ge extends ie{constructor(e){super(),ce(this,e,null,Ce,ue,{})}}export{Ge as default};
