import{S as ie,i as ce,s as ue,k as h,q as R,a as U,w as he,l as f,m as p,r as C,h as u,c as V,x as fe,n as d,b as Y,G as s,y as de,u as Q,f as pe,t as _e,U as ve,z as me,H as be,o as ye,e as re,p as W,T as ae,I as F,L as Ee,B as ge,Q as ke}from"../../../chunks/index-0e9e634d.js";import"../../../chunks/navigation-c15f7844.js";import{u as Ie}from"../../../chunks/store-b95407d5.js";import{S as Te}from"../../../chunks/SvelteToast-ff19346a.js";import{t as Z}from"../../../chunks/stores-3e1ed05a.js";function oe(a,e,t){const o=a.slice();return o[23]=e[t],o}function we(a){let e,t,o,r,c;return{c(){e=h("div"),t=h("h2"),o=R("Literal system's guess: "),r=h("tt"),c=R(a[4]),this.h()},l(l){e=f(l,"DIV",{class:!0});var n=p(e);t=f(n,"H2",{});var i=p(t);o=C(i,"Literal system's guess: "),r=f(i,"TT",{style:!0});var _=p(r);c=C(_,a[4]),_.forEach(u),i.forEach(u),n.forEach(u),this.h()},h(){W(r,"color","red"),d(e,"class","col-lg-10 py-md-3")},m(l,n){Y(l,e,n),s(e,t),s(t,o),s(t,r),s(r,c)},p(l,n){n&16&&Q(c,l[4])},d(l){l&&u(e)}}}function Le(a){let e,t,o,r,c;return{c(){e=h("div"),t=h("h2"),o=R("Literal system's guess: "),r=h("tt"),c=R(a[4]),this.h()},l(l){e=f(l,"DIV",{class:!0});var n=p(e);t=f(n,"H2",{});var i=p(t);o=C(i,"Literal system's guess: "),r=f(i,"TT",{style:!0});var _=p(r);c=C(_,a[4]),_.forEach(u),i.forEach(u),n.forEach(u),this.h()},h(){W(r,"color","green"),d(e,"class","col-sm-10 py-md-3")},m(l,n){Y(l,e,n),s(e,t),s(t,o),s(t,r),s(r,c)},p(l,n){n&16&&Q(c,l[4])},d(l){l&&u(e)}}}function Oe(a){let e,t,o,r,c;return{c(){e=h("div"),t=h("h2"),o=R("PraX guess: "),r=h("tt"),c=R(a[6]),this.h()},l(l){e=f(l,"DIV",{class:!0});var n=p(e);t=f(n,"H2",{});var i=p(t);o=C(i,"PraX guess: "),r=f(i,"TT",{style:!0});var _=p(r);c=C(_,a[6]),_.forEach(u),i.forEach(u),n.forEach(u),this.h()},h(){W(r,"color","red"),d(e,"class","col-lg-10 py-md-3")},m(l,n){Y(l,e,n),s(e,t),s(t,o),s(t,r),s(r,c)},p(l,n){n&64&&Q(c,l[6])},d(l){l&&u(e)}}}function Pe(a){let e,t,o,r,c;return{c(){e=h("div"),t=h("h2"),o=R("PraX guess: "),r=h("tt"),c=R(a[6]),this.h()},l(l){e=f(l,"DIV",{class:!0});var n=p(e);t=f(n,"H2",{});var i=p(t);o=C(i,"PraX guess: "),r=f(i,"TT",{style:!0});var _=p(r);c=C(_,a[6]),_.forEach(u),i.forEach(u),n.forEach(u),this.h()},h(){W(r,"color","green"),d(e,"class","col-lg-10 py-md-3")},m(l,n){Y(l,e,n),s(e,t),s(t,o),s(t,r),s(r,c)},p(l,n){n&64&&Q(c,l[6])},d(l){l&&u(e)}}}function Ae(a){let e,t,o,r,c,l,n,i,_,I,D,E,v,O,k,P,N,A,M,X,L,b;return{c(){e=h("div"),t=h("div"),o=h("span"),r=R("Enter example"),c=U(),l=h("input"),n=U(),i=h("input"),_=U(),I=h("label"),D=h("i"),E=U(),v=h("input"),O=U(),k=h("label"),P=h("i"),N=U(),A=h("div"),M=h("button"),X=R("Add"),this.h()},l(j){e=f(j,"DIV",{class:!0});var T=p(e);t=f(T,"DIV",{class:!0});var m=p(t);o=f(m,"SPAN",{class:!0});var B=p(o);r=C(B,"Enter example"),B.forEach(u),c=V(m),l=f(m,"INPUT",{type:!0,class:!0}),n=V(m),i=f(m,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),_=V(m),I=f(m,"LABEL",{class:!0,for:!0});var y=p(I);D=f(y,"I",{class:!0}),p(D).forEach(u),y.forEach(u),E=V(m),v=f(m,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),O=V(m),k=f(m,"LABEL",{class:!0,for:!0});var H=p(k);P=f(H,"I",{class:!0}),p(P).forEach(u),H.forEach(u),m.forEach(u),N=V(T),A=f(T,"DIV",{class:!0});var J=p(A);M=f(J,"BUTTON",{type:!0,class:!0});var z=p(M);X=C(z,"Add"),z.forEach(u),J.forEach(u),T.forEach(u),this.h()},h(){d(o,"class","input-group-text"),d(l,"type","text"),d(l,"class","form-control"),d(i,"type","radio"),d(i,"class","btn-check"),d(i,"name","utterance-type"),i.__value="+",i.value=i.__value,d(i,"id","positive"),d(i,"autocomplete","off"),a[12][0].push(i),d(D,"class","fa-solid fa-plus"),d(I,"class","btn btn-outline-primary"),d(I,"for","positive"),d(v,"type","radio"),d(v,"class","btn-check"),d(v,"name","utterance-type"),v.__value="-",v.value=v.__value,d(v,"id","negative"),d(v,"autocomplete","off"),a[12][0].push(v),d(P,"class","fa-solid fa-minus"),d(k,"class","btn btn-outline-danger"),d(k,"for","negative"),d(t,"class","input-group col"),d(M,"type","submit"),d(M,"class","btn btn-primary col-auto"),d(A,"class","col"),d(e,"class","row gx-1")},m(j,T){Y(j,e,T),s(e,t),s(t,o),s(o,r),s(t,c),s(t,l),ae(l,a[1]),s(t,n),s(t,i),i.checked=i.__value===a[2],s(t,_),s(t,I),s(I,D),s(t,E),s(t,v),v.checked=v.__value===a[2],s(t,O),s(t,k),s(k,P),s(e,N),s(e,A),s(A,M),s(M,X),L||(b=[F(l,"input",a[10]),F(i,"change",a[11]),F(v,"change",a[13]),F(M,"click",a[8])],L=!0)},p(j,T){T&2&&l.value!==j[1]&&ae(l,j[1]),T&4&&(i.checked=i.__value===j[2]),T&4&&(v.checked=v.__value===j[2])},d(j){j&&u(e),a[12][0].splice(a[12][0].indexOf(i),1),a[12][0].splice(a[12][0].indexOf(v),1),L=!1,Ee(b)}}}function Be(a){let e,t;return{c(){e=h("h2"),t=R("Succeeded!"),this.h()},l(o){e=f(o,"H2",{style:!0});var r=p(e);t=C(r,"Succeeded!"),r.forEach(u),this.h()},h(){W(e,"color","green")},m(o,r){Y(o,e,r),s(e,t)},p:ge,d(o){o&&u(e)}}}function De(a){let e,t,o=a[23].string+"",r,c,l,n,i,_,I,D,E,v=a[23].string+"",O,k,P,N,A,M;function X(){return a[15](a[23])}return{c(){e=h("div"),t=h("li"),r=R(o),c=U(),l=h("li"),n=h("i"),i=U(),_=h("li"),I=h("i"),D=U(),E=h("li"),O=R(v),k=h("button"),P=h("i"),N=U(),this.h()},l(L){e=f(L,"DIV",{class:!0});var b=p(e);t=f(b,"LI",{class:!0});var j=p(t);r=C(j,o),j.forEach(u),c=V(b),l=f(b,"LI",{class:!0});var T=p(l);n=f(T,"I",{class:!0}),p(n).forEach(u),T.forEach(u),i=V(b),_=f(b,"LI",{class:!0});var m=p(_);I=f(m,"I",{class:!0}),p(I).forEach(u),m.forEach(u),D=V(b),E=f(b,"LI",{class:!0});var B=p(E);O=C(B,v),k=f(B,"BUTTON",{class:!0});var y=p(k);P=f(y,"I",{class:!0}),p(P).forEach(u),y.forEach(u),B.forEach(u),N=V(b),b.forEach(u),this.h()},h(){d(t,"class","list-group-item list-group-item flex-fill"),d(n,"class","fa-solid fa-plus"),d(l,"class","list-group-item list-group-item"),d(I,"class","fa-solid fa-minus"),d(_,"class","list-group-item list-group-item-danger"),d(P,"class","fa fa-times"),d(k,"class","btn btn-default btn-sm float-end"),d(E,"class","list-group-item list-group-item-danger"),d(e,"class","list-group list-group-horizontal py-md-1")},m(L,b){Y(L,e,b),s(e,t),s(t,r),s(e,c),s(e,l),s(l,n),s(e,i),s(e,_),s(_,I),s(e,D),s(e,E),s(E,O),s(E,k),s(k,P),s(e,N),A||(M=F(k,"click",X),A=!0)},p(L,b){a=L,b&8&&o!==(o=a[23].string+"")&&Q(r,o),b&8&&v!==(v=a[23].string+"")&&Q(O,v)},d(L){L&&u(e),A=!1,M()}}}function He(a){let e,t,o=a[23].string+"",r,c,l,n,i,_,I,D,E,v=a[23].string+"",O,k,P,N,A,M;function X(){return a[14](a[23])}return{c(){e=h("div"),t=h("li"),r=R(o),c=U(),l=h("li"),n=h("i"),i=U(),_=h("li"),I=h("i"),D=U(),E=h("li"),O=R(v),k=h("button"),P=h("i"),N=U(),this.h()},l(L){e=f(L,"DIV",{class:!0});var b=p(e);t=f(b,"LI",{class:!0});var j=p(t);r=C(j,o),j.forEach(u),c=V(b),l=f(b,"LI",{class:!0});var T=p(l);n=f(T,"I",{class:!0}),p(n).forEach(u),T.forEach(u),i=V(b),_=f(b,"LI",{class:!0});var m=p(_);I=f(m,"I",{class:!0}),p(I).forEach(u),m.forEach(u),D=V(b),E=f(b,"LI",{class:!0});var B=p(E);O=C(B,v),k=f(B,"BUTTON",{class:!0});var y=p(k);P=f(y,"I",{class:!0}),p(P).forEach(u),y.forEach(u),B.forEach(u),N=V(b),b.forEach(u),this.h()},h(){d(t,"class","list-group-item list-group-item flex-fill"),d(n,"class","fa-solid fa-plus"),d(l,"class","list-group-item list-group-item-primary"),d(I,"class","fa-solid fa-minus"),d(_,"class","list-group-item list-group-item"),d(P,"class","fa fa-times"),d(k,"class","btn btn-default btn-sm float-end"),d(E,"class","list-group-item list-group-item-primary"),d(e,"class","list-group list-group-horizontal py-md-1")},m(L,b){Y(L,e,b),s(e,t),s(t,r),s(e,c),s(e,l),s(l,n),s(e,i),s(e,_),s(_,I),s(e,D),s(e,E),s(E,O),s(E,k),s(k,P),s(e,N),A||(M=F(k,"click",X),A=!0)},p(L,b){a=L,b&8&&o!==(o=a[23].string+"")&&Q(r,o),b&8&&v!==(v=a[23].string+"")&&Q(O,v)},d(L){L&&u(e),A=!1,M()}}}function ne(a){let e;function t(c,l){if(c[23].label=="+")return He;if(c[23].label=="-")return De}let o=t(a),r=o&&o(a);return{c(){r&&r.c(),e=re()},l(c){r&&r.l(c),e=re()},m(c,l){r&&r.m(c,l),Y(c,e,l)},p(c,l){o===(o=t(c))&&r?r.p(c,l):(r&&r.d(1),r=o&&o(c),r&&(r.c(),r.m(e.parentNode,e)))},d(c){r&&r.d(c),c&&u(e)}}}function Ne(a){let e,t,o,r,c,l,n,i,_,I,D,E,v,O,k,P,N,A,M,X,L;function b(g,w){return g[5]?Le:we}let j=b(a),T=j(a);function m(g,w){return g[7]?Pe:Oe}let B=m(a),y=B(a);function H(g,w){return g[5]||g[7]?Be:Ae}let J=H(a),z=J(a),G=a[3],q=[];for(let g=0;g<G.length;g+=1)q[g]=ne(oe(a,G,g));return X=new Te({}),{c(){e=h("div"),t=h("h1"),o=R("PraX demo"),r=U(),c=h("p"),l=R('Here, you are presented with a regular expression. You can interact with two systems and communicate the regular expression using examples. Each example is a string (which you can type in the text box) and an example (+ to indicate that the string should match the synthesized regex and - to indicate that it should not). Click "Add" once you have entered your example, and both systems will try to guess the regular expression. You can refresh to communite a different regular expression.'),n=U(),i=h("div"),_=h("h2"),I=R("Regex: "),D=h("tt"),E=R(a[0]),v=U(),T.c(),O=U(),y.c(),k=U(),z.c(),P=U(),N=h("div"),A=h("ul");for(let g=0;g<q.length;g+=1)q[g].c();M=U(),he(X.$$.fragment),this.h()},l(g){e=f(g,"DIV",{class:!0});var w=p(e);t=f(w,"H1",{});var S=p(t);o=C(S,"PraX demo"),S.forEach(u),r=V(w),c=f(w,"P",{});var K=p(c);l=C(K,'Here, you are presented with a regular expression. You can interact with two systems and communicate the regular expression using examples. Each example is a string (which you can type in the text box) and an example (+ to indicate that the string should match the synthesized regex and - to indicate that it should not). Click "Add" once you have entered your example, and both systems will try to guess the regular expression. You can refresh to communite a different regular expression.'),K.forEach(u),n=V(w),i=f(w,"DIV",{class:!0});var ee=p(i);_=f(ee,"H2",{});var x=p(_);I=C(x,"Regex: "),D=f(x,"TT",{});var te=p(D);E=C(te,a[0]),te.forEach(u),x.forEach(u),ee.forEach(u),v=V(w),T.l(w),O=V(w),y.l(w),k=V(w),z.l(w),P=V(w),N=f(w,"DIV",{class:!0});var se=p(N);A=f(se,"UL",{class:!0});var le=p(A);for(let $=0;$<q.length;$+=1)q[$].l(le);le.forEach(u),se.forEach(u),M=V(w),fe(X.$$.fragment,w),w.forEach(u),this.h()},h(){d(i,"class","col-10 py-md-3"),d(A,"class","list-group"),d(N,"class","col-lg-6 py-md-5"),d(e,"class","col-lg-10 mx-auto p-3 py-md-5")},m(g,w){Y(g,e,w),s(e,t),s(t,o),s(e,r),s(e,c),s(c,l),s(e,n),s(e,i),s(i,_),s(_,I),s(_,D),s(D,E),s(e,v),T.m(e,null),s(e,O),y.m(e,null),s(e,k),z.m(e,null),s(e,P),s(e,N),s(N,A);for(let S=0;S<q.length;S+=1)q[S].m(A,null);s(e,M),de(X,e,null),L=!0},p(g,[w]){if((!L||w&1)&&Q(E,g[0]),j===(j=b(g))&&T?T.p(g,w):(T.d(1),T=j(g),T&&(T.c(),T.m(e,O))),B===(B=m(g))&&y?y.p(g,w):(y.d(1),y=B(g),y&&(y.c(),y.m(e,k))),J===(J=H(g))&&z?z.p(g,w):(z.d(1),z=J(g),z&&(z.c(),z.m(e,P))),w&520){G=g[3];let S;for(S=0;S<G.length;S+=1){const K=oe(g,G,S);q[S]?q[S].p(K,w):(q[S]=ne(K),q[S].c(),q[S].m(A,null))}for(;S<q.length;S+=1)q[S].d(1);q.length=G.length}},i(g){L||(pe(X.$$.fragment,g),L=!0)},o(g){_e(X.$$.fragment,g),L=!1},d(g){g&&u(e),T.d(),y.d(),z.d(),ve(q,g),me(X)}}}let je=1,Ue="https://qdkd8x0wqtlir789.us-east-1.aws.endpoints.huggingface.cloud",Ve="https://r6fve43vkbl7ddj4.us-east-1.aws.endpoints.huggingface.cloud";function Me(a,e){return a=Math.ceil(a),e=Math.floor(e),Math.floor(Math.random()*(e-a)+a)}function Se(a,e,t){let o;be(a,Ie,m=>t(19,o=m));let r=[],c="",l="",n="",i=null,_=[],I="",D=!1,E="",v=!1,O=0;function k(){if(r=[...r,{string:n,label:i,id:O}],n.length>0)if(i===null){Z.push("Label not provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}else{for(var m of _)if(n==m.string){Z.push("This example has already been provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}if(i=="+"&&n.match(`^${c}$`))t(3,_=[..._,{string:n,label:i,id:O}]),t(1,n=""),t(2,i=null),O+=1;else if(i=="-"&&!n.match(`^${c}$`))t(3,_=[..._,{string:n,label:i,id:O}]),t(1,n=""),t(2,i=null),O+=1;else{Z.push("Label does not match string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}}else{Z.push("Please enter a valid string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}P()}async function P(){t(4,I="...");let m=await fetch(Ue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inputs:{true_program:c,spec:_}})}).then(y=>y.json());m&&(m.guess?t(4,I=m.guess):t(4,I="<regex not found>"),m.top_1_success&&t(5,D=!0)),t(6,E="...");let B=await fetch(Ve,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inputs:{true_program:c,spec:_}})}).then(y=>y.json());B&&(B.guess?t(6,E=B.guess):t(6,E="<regex not found>"),B.top_1_success&&t(7,v=!0))}function N(m){t(3,_=_.filter(B=>B.id!=m))}async function A(){let m=await fetch("https://regex-interact-default-rtdb.firebaseio.com/user_study.json").then(G=>G.json()),B=new Object,y=new Object;for(var H in m)if(m[H].hasOwnProperty("interaction")){let G=!1;m[H].interaction.hasOwnProperty(o)&&m[H].interaction[o].hasOwnProperty("completed")&&m[H].interaction[o].completed&&(G=!0),m[H].interaction.hasOwnProperty(o)&&G&&(B[H]=m[H]),Object.keys(m[H].interaction).length<je&&(y[H]=m[H])}else y[H]=m[H];let J=Me(0,Object.keys(y).length);console.log(J);let z=0;for(var H in y){if(z==J){l=H,t(0,c=y[H].program),console.log(H,y[H]),console.log(l,c),t(4,I=""),t(5,D=!1),t(6,E=""),t(7,v=!1);return}z+=1}}ye(A);const M=[[]];function X(){n=this.value,t(1,n)}function L(){i=this.__value,t(2,i)}function b(){i=this.__value,t(2,i)}return[c,n,i,_,I,D,E,v,k,N,X,L,M,b,m=>N(m.id),m=>N(m.id)]}class Re extends ie{constructor(e){super(),ce(this,e,Se,Ne,ue,{})}}function Ce(a){let e,t,o,r,c;return r=new Re({}),{c(){e=h("meta"),t=U(),o=h("main"),he(r.$$.fragment),this.h()},l(l){const n=ke("svelte-jy85c7",document.head);e=f(n,"META",{name:!0,content:!0}),n.forEach(u),t=V(l),o=f(l,"MAIN",{});var i=p(o);fe(r.$$.fragment,i),i.forEach(u),this.h()},h(){document.title="Regex from Examples",d(e,"name","description"),d(e,"content","Collect examples of examples used to communicate about regexes")},m(l,n){s(document.head,e),Y(l,t,n),Y(l,o,n),de(r,o,null),c=!0},p:ge,i(l){c||(pe(r.$$.fragment,l),c=!0)},o(l){_e(r.$$.fragment,l),c=!1},d(l){u(e),l&&u(t),l&&u(o),me(r)}}}class Je extends ie{constructor(e){super(),ce(this,e,null,Ce,ue,{})}}export{Je as default};
