import{S as Ze,i as $e,s as et,k as u,q as k,a as O,w as tt,l as h,m as f,r as I,h as a,c as S,x as st,n as p,b as L,G as s,T as qe,y as rt,I as fe,u as ee,f as lt,t as ot,U as it,z as at,L as ct,H as Fe,o as ut,e as Ge,B as nt,p as de,Q as ht}from"../../../../chunks/index-0e9e634d.js";import{g as Ne}from"../../../../chunks/navigation-c15f7844.js";import{u as ft,o as dt}from"../../../../chunks/store-b95407d5.js";import{d as Pe}from"../../../../chunks/singletons-69107a7c.js";import{S as pt}from"../../../../chunks/SvelteToast-ff19346a.js";import{t as ve}from"../../../../chunks/stores-3e1ed05a.js";function Ke(c,e,t){const l=c.slice();return l[23]=e[t],l}function mt(c){let e,t,l,r,i,o;return{c(){e=u("div"),t=u("h2"),l=k("You are now interacting with the "),r=u("span"),i=k("red"),o=k(" robot."),this.h()},l(n){e=h(n,"DIV",{});var d=f(e);t=h(d,"H2",{});var m=f(t);l=I(m,"You are now interacting with the "),r=h(m,"SPAN",{style:!0});var y=f(r);i=I(y,"red"),y.forEach(a),o=I(m," robot."),m.forEach(a),d.forEach(a),this.h()},h(){de(r,"color","red")},m(n,d){L(n,e,d),s(e,t),s(t,l),s(t,r),s(r,i),s(t,o)},d(n){n&&a(e)}}}function gt(c){let e,t,l,r,i,o;return{c(){e=u("div"),t=u("h2"),l=k("You are now interacting with the "),r=u("span"),i=k("blue"),o=k(" robot."),this.h()},l(n){e=h(n,"DIV",{});var d=f(e);t=h(d,"H2",{});var m=f(t);l=I(m,"You are now interacting with the "),r=h(m,"SPAN",{style:!0});var y=f(r);i=I(y,"blue"),y.forEach(a),o=I(m," robot."),m.forEach(a),d.forEach(a),this.h()},h(){de(r,"color","blue")},m(n,d){L(n,e,d),s(e,t),s(t,l),s(t,r),s(r,i),s(t,o)},d(n){n&&a(e)}}}function _t(c){let e,t,l,r,i,o;return{c(){e=u("div"),t=u("h2"),l=k("You are now interacting with the "),r=u("span"),i=k("green"),o=k(" robot."),this.h()},l(n){e=h(n,"DIV",{});var d=f(e);t=h(d,"H2",{});var m=f(t);l=I(m,"You are now interacting with the "),r=h(m,"SPAN",{style:!0});var y=f(r);i=I(y,"green"),y.forEach(a),o=I(m," robot."),m.forEach(a),d.forEach(a),this.h()},h(){de(r,"color","green")},m(n,d){L(n,e,d),s(e,t),s(t,l),s(t,r),s(r,i),s(t,o)},d(n){n&&a(e)}}}function vt(c){let e,t,l,r,i;return{c(){e=u("div"),t=u("h2"),l=k("System's guess: "),r=u("tt"),i=k(c[6]),this.h()},l(o){e=h(o,"DIV",{class:!0});var n=f(e);t=h(n,"H2",{});var d=f(t);l=I(d,"System's guess: "),r=h(d,"TT",{style:!0});var m=f(r);i=I(m,c[6]),m.forEach(a),d.forEach(a),n.forEach(a),this.h()},h(){de(r,"color","red"),p(e,"class","col-lg-10 py-md-3")},m(o,n){L(o,e,n),s(e,t),s(t,l),s(t,r),s(r,i)},p(o,n){n&64&&ee(i,o[6])},d(o){o&&a(e)}}}function bt(c){let e,t,l,r,i;return{c(){e=u("div"),t=u("h2"),l=k("System's guess: "),r=u("tt"),i=k(c[6]),this.h()},l(o){e=h(o,"DIV",{class:!0});var n=f(e);t=h(n,"H2",{});var d=f(t);l=I(d,"System's guess: "),r=h(d,"TT",{style:!0});var m=f(r);i=I(m,c[6]),m.forEach(a),d.forEach(a),n.forEach(a),this.h()},h(){de(r,"color","green"),p(e,"class","col-lg-10 py-md-3")},m(o,n){L(o,e,n),s(e,t),s(t,l),s(t,r),s(r,i)},p(o,n){n&64&&ee(i,o[6])},d(o){o&&a(e)}}}function yt(c){let e,t,l=c[23].string+"",r,i,o,n,d,m,y,w;return{c(){e=u("div"),t=u("li"),r=k(l),i=O(),o=u("li"),n=u("i"),d=O(),m=u("li"),y=u("i"),w=O(),this.h()},l(b){e=h(b,"DIV",{class:!0});var v=f(e);t=h(v,"LI",{class:!0});var j=f(t);r=I(j,l),j.forEach(a),i=S(v),o=h(v,"LI",{class:!0});var U=f(o);n=h(U,"I",{class:!0}),f(n).forEach(a),U.forEach(a),d=S(v),m=h(v,"LI",{class:!0});var Y=f(m);y=h(Y,"I",{class:!0}),f(y).forEach(a),Y.forEach(a),v.forEach(a),w=S(b),this.h()},h(){p(t,"class","list-group-item list-group-item flex-fill"),p(n,"class","fa-solid fa-plus"),p(o,"class","list-group-item list-group-item"),p(y,"class","fa-solid fa-minus"),p(m,"class","list-group-item list-group-item-danger"),p(e,"class","list-group list-group-horizontal py-md-1")},m(b,v){L(b,e,v),s(e,t),s(t,r),s(e,i),s(e,o),s(o,n),s(e,d),s(e,m),s(m,y),L(b,w,v)},p(b,v){v&32&&l!==(l=b[23].string+"")&&ee(r,l)},d(b){b&&a(e),b&&a(w)}}}function Et(c){let e,t,l=c[23].string+"",r,i,o,n,d,m,y,w;return{c(){e=u("div"),t=u("li"),r=k(l),i=O(),o=u("li"),n=u("i"),d=O(),m=u("li"),y=u("i"),w=O(),this.h()},l(b){e=h(b,"DIV",{class:!0});var v=f(e);t=h(v,"LI",{class:!0});var j=f(t);r=I(j,l),j.forEach(a),i=S(v),o=h(v,"LI",{class:!0});var U=f(o);n=h(U,"I",{class:!0}),f(n).forEach(a),U.forEach(a),d=S(v),m=h(v,"LI",{class:!0});var Y=f(m);y=h(Y,"I",{class:!0}),f(y).forEach(a),Y.forEach(a),v.forEach(a),w=S(b),this.h()},h(){p(t,"class","list-group-item list-group-item flex-fill"),p(n,"class","fa-solid fa-plus"),p(o,"class","list-group-item list-group-item-primary"),p(y,"class","fa-solid fa-minus"),p(m,"class","list-group-item list-group-item"),p(e,"class","list-group list-group-horizontal py-md-1")},m(b,v){L(b,e,v),s(e,t),s(t,r),s(e,i),s(e,o),s(o,n),s(e,d),s(e,m),s(m,y),L(b,w,v)},p(b,v){v&32&&l!==(l=b[23].string+"")&&ee(r,l)},d(b){b&&a(e),b&&a(w)}}}function Qe(c){let e;function t(i,o){if(i[23].label=="+")return Et;if(i[23].label=="-")return yt}let l=t(c),r=l&&l(c);return{c(){r&&r.c(),e=Ge()},l(i){r&&r.l(i),e=Ge()},m(i,o){r&&r.m(i,o),L(i,e,o)},p(i,o){l===(l=t(i))&&r?r.p(i,o):(r&&r.d(1),r=l&&l(i),r&&(r.c(),r.m(e.parentNode,e)))},d(i){r&&r.d(i),i&&a(e)}}}function We(c){let e,t,l,r,i;return{c(){e=u("div"),t=u("button"),l=k("Submit"),this.h()},l(o){e=h(o,"DIV",{class:!0});var n=f(e);t=h(n,"BUTTON",{class:!0});var d=f(t);l=I(d,"Submit"),d.forEach(a),n.forEach(a),this.h()},h(){p(t,"class","btn btn-success btn-lg float-end"),p(e,"class","col-lg-6 py-md-5")},m(o,n){L(o,e,n),s(e,t),s(t,l),r||(i=fe(t,"click",c[9]),r=!0)},p:nt,d(o){o&&a(e),r=!1,i()}}}function wt(c){let e,t,l,r,i,o,n,d,m,y,w,b,v,j,U,Y,te,C,X,se,G,re,ce,le,g,T,x,N,oe,V,q,P,be,K,ue,ye,B,Ee,Q,he,we,ae,F,ke,Ie,ne,W,Te,pe,Z,$,je,De;function Be(_,E){return _[1]%3==0?_t:_[1]%3==1?gt:mt}let me=Be(c),R=me(c);function Ae(_,E){return _[7]?bt:vt}let ge=Ae(c),J=ge(c),ie=c[5],A=[];for(let _=0;_<ie.length;_+=1)A[_]=Qe(Ke(c,ie,_));let H=(c[5].length>=10||c[7])&&We(c);return Z=new pt({}),{c(){e=u("div"),t=u("div"),l=u("h4"),r=k("Completed "),i=k(c[1]),o=k(" of "),n=k(c[0]),d=k(" tasks"),m=O(),y=u("div"),w=u("h2"),b=k("You are now the describer"),v=O(),j=u("p"),U=k(`Here, you are presented with a regular expression. You need to interact with a system and communicate the regular expression. After each example is provided, a system that is playing the role of a guesser will guess which regular expression you might have been referring to. The game is completed when the system's guess matches the regular expression you were given, or when 10 examples have been provided. If the system produces "null" as a guess, then the system failed to guess the regular expression. You can provide more examples, which might help the system, and if the system fails to guess the regular expression after 10 examples, you can submit the examples you provided and move on to the next task.`),Y=O(),R.c(),te=O(),C=u("div"),X=u("h2"),se=k("Regex: "),G=u("tt"),re=k(c[2]),ce=O(),J.c(),le=O(),g=u("div"),T=u("div"),x=u("span"),N=k("Enter example"),oe=O(),V=u("input"),q=O(),P=u("input"),be=O(),K=u("label"),ue=u("i"),ye=O(),B=u("input"),Ee=O(),Q=u("label"),he=u("i"),we=O(),ae=u("div"),F=u("button"),ke=k("Add"),Ie=O(),ne=u("div"),W=u("ul");for(let _=0;_<A.length;_+=1)A[_].c();Te=O(),H&&H.c(),pe=O(),tt(Z.$$.fragment),this.h()},l(_){e=h(_,"DIV",{class:!0});var E=f(e);t=h(E,"DIV",{class:!0});var D=f(t);l=h(D,"H4",{});var z=f(l);r=I(z,"Completed "),i=I(z,c[1]),o=I(z," of "),n=I(z,c[0]),d=I(z," tasks"),z.forEach(a),D.forEach(a),m=S(E),y=h(E,"DIV",{class:!0});var He=f(y);w=h(He,"H2",{});var Ue=f(w);b=I(Ue,"You are now the describer"),Ue.forEach(a),He.forEach(a),v=S(E),j=h(E,"P",{});var Ye=f(j);U=I(Ye,`Here, you are presented with a regular expression. You need to interact with a system and communicate the regular expression. After each example is provided, a system that is playing the role of a guesser will guess which regular expression you might have been referring to. The game is completed when the system's guess matches the regular expression you were given, or when 10 examples have been provided. If the system produces "null" as a guess, then the system failed to guess the regular expression. You can provide more examples, which might help the system, and if the system fails to guess the regular expression after 10 examples, you can submit the examples you provided and move on to the next task.`),Ye.forEach(a),Y=S(E),R.l(E),te=S(E),C=h(E,"DIV",{class:!0});var xe=f(C);X=h(xe,"H2",{});var Oe=f(X);se=I(Oe,"Regex: "),G=h(Oe,"TT",{});var Le=f(G);re=I(Le,c[2]),Le.forEach(a),Oe.forEach(a),xe.forEach(a),ce=S(E),J.l(E),le=S(E),g=h(E,"DIV",{class:!0});var _e=f(g);T=h(_e,"DIV",{class:!0});var M=f(T);x=h(M,"SPAN",{class:!0});var Ve=f(x);N=I(Ve,"Enter example"),Ve.forEach(a),oe=S(M),V=h(M,"INPUT",{type:!0,class:!0}),q=S(M),P=h(M,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),be=S(M),K=h(M,"LABEL",{class:!0,for:!0});var Me=f(K);ue=h(Me,"I",{class:!0}),f(ue).forEach(a),Me.forEach(a),ye=S(M),B=h(M,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),Ee=S(M),Q=h(M,"LABEL",{class:!0,for:!0});var Je=f(Q);he=h(Je,"I",{class:!0}),f(he).forEach(a),Je.forEach(a),M.forEach(a),we=S(_e),ae=h(_e,"DIV",{class:!0});var Re=f(ae);F=h(Re,"BUTTON",{type:!0,class:!0});var ze=f(F);ke=I(ze,"Add"),ze.forEach(a),Re.forEach(a),_e.forEach(a),Ie=S(E),ne=h(E,"DIV",{class:!0});var Ce=f(ne);W=h(Ce,"UL",{class:!0});var Xe=f(W);for(let Se=0;Se<A.length;Se+=1)A[Se].l(Xe);Xe.forEach(a),Ce.forEach(a),Te=S(E),H&&H.l(E),pe=S(E),st(Z.$$.fragment,E),E.forEach(a),this.h()},h(){p(t,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),p(y,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),p(C,"class","col-lg-10 py-md-3"),p(x,"class","input-group-text"),p(V,"type","text"),p(V,"class","form-control"),p(P,"type","radio"),p(P,"class","btn-check"),p(P,"name","utterance-type"),P.__value="+",P.value=P.__value,p(P,"id","positive"),p(P,"autocomplete","off"),c[12][0].push(P),p(ue,"class","fa-solid fa-plus"),p(K,"class","btn btn-outline-primary"),p(K,"for","positive"),p(B,"type","radio"),p(B,"class","btn-check"),p(B,"name","utterance-type"),B.__value="-",B.value=B.__value,p(B,"id","negative"),p(B,"autocomplete","off"),c[12][0].push(B),p(he,"class","fa-solid fa-minus"),p(Q,"class","btn btn-outline-danger"),p(Q,"for","negative"),p(T,"class","input-group col"),p(F,"type","submit"),p(F,"class","btn btn-primary col-auto"),p(ae,"class","col"),p(g,"class","row gx-1"),p(W,"class","list-group"),p(ne,"class","col-lg-6 py-md-5"),p(e,"class","col-lg-10 mx-auto p-3 py-md-5")},m(_,E){L(_,e,E),s(e,t),s(t,l),s(l,r),s(l,i),s(l,o),s(l,n),s(l,d),s(e,m),s(e,y),s(y,w),s(w,b),s(e,v),s(e,j),s(j,U),s(e,Y),R.m(e,null),s(e,te),s(e,C),s(C,X),s(X,se),s(X,G),s(G,re),s(e,ce),J.m(e,null),s(e,le),s(e,g),s(g,T),s(T,x),s(x,N),s(T,oe),s(T,V),qe(V,c[3]),s(T,q),s(T,P),P.checked=P.__value===c[4],s(T,be),s(T,K),s(K,ue),s(T,ye),s(T,B),B.checked=B.__value===c[4],s(T,Ee),s(T,Q),s(Q,he),s(g,we),s(g,ae),s(ae,F),s(F,ke),s(e,Ie),s(e,ne),s(ne,W);for(let D=0;D<A.length;D+=1)A[D].m(W,null);s(e,Te),H&&H.m(e,null),s(e,pe),rt(Z,e,null),$=!0,je||(De=[fe(V,"input",c[10]),fe(P,"change",c[11]),fe(B,"change",c[13]),fe(F,"click",c[8])],je=!0)},p(_,[E]){if((!$||E&2)&&ee(i,_[1]),(!$||E&1)&&ee(n,_[0]),me!==(me=Be(_))&&(R.d(1),R=me(_),R&&(R.c(),R.m(e,te))),(!$||E&4)&&ee(re,_[2]),ge===(ge=Ae(_))&&J?J.p(_,E):(J.d(1),J=ge(_),J&&(J.c(),J.m(e,le))),E&8&&V.value!==_[3]&&qe(V,_[3]),E&16&&(P.checked=P.__value===_[4]),E&16&&(B.checked=B.__value===_[4]),E&32){ie=_[5];let D;for(D=0;D<ie.length;D+=1){const z=Ke(_,ie,D);A[D]?A[D].p(z,E):(A[D]=Qe(z),A[D].c(),A[D].m(W,null))}for(;D<A.length;D+=1)A[D].d(1);A.length=ie.length}_[5].length>=10||_[7]?H?H.p(_,E):(H=We(_),H.c(),H.m(e,pe)):H&&(H.d(1),H=null)},i(_){$||(lt(Z.$$.fragment,_),$=!0)},o(_){ot(Z.$$.fragment,_),$=!1},d(_){_&&a(e),R.d(),J.d(),c[12][0].splice(c[12][0].indexOf(P),1),c[12][0].splice(c[12][0].indexOf(B),1),it(A,_),H&&H.d(),at(Z),je=!1,ct(De)}}}function kt(c,e){return c=Math.ceil(c),e=Math.floor(e),Math.floor(Math.random()*(e-c)+c)}function It(c,e,t){let l,r;Fe(c,ft,g=>t(18,l=g)),Fe(c,dt,g=>t(19,r=g));let i=[],o=1,n=30,d=0,m="",y="",w="",b=null,v=[],j="",U=!1,Y=0;function te(){if(i=[...i,{string:w,label:b,id:Y}],w.length>0)if(b===null){ve.push("Label not provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}else{for(var g of v)if(w==g.string){ve.push("This example has already been provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}if(b=="+"&&w.match(`^${m}$`))t(5,v=[...v,{string:w,label:b,id:Y}]),t(3,w=""),t(4,b=null),Y+=1;else if(b=="-"&&!w.match(`^${m}$`))t(5,v=[...v,{string:w,label:b,id:Y}]),t(3,w=""),t(4,b=null),Y+=1;else{ve.push("Label does not match string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}}else{ve.push("Please enter a valid string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}C()}async function C(){if((d+r)%3==0){t(6,j="");let g=await fetch("https://sqv1rlpqi9lshx3r.us-east-1.aws.endpoints.huggingface.cloud",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({inputs:{true_program:m,spec:v}})}).then(T=>T.json());g&&(g.guess?t(6,j=g.guess):t(6,j="<regex not found>"),g.top_1_success&&t(7,U=!0),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/${v.length}.json`,{method:"PUT",body:JSON.stringify({listener_idx:(d+r)%3,response:g})}))}else if((d+r)%3==1){t(6,j="");let g=await fetch("https://c0vmrzlr7laeho8b.us-east-1.aws.endpoints.huggingface.cloud",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({inputs:{true_program:m,spec:v}})}).then(T=>T.json());g&&(g.guess?t(6,j=g.guess):t(6,j="<regex not found>"),g.top_1_success&&t(7,U=!0),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/${v.length}.json`,{method:"PUT",body:JSON.stringify({listener_idx:(d+r)%3,response:g})}))}else{t(6,j="");let g=await fetch("https://fa096oepnph7ti6r.us-east-1.aws.endpoints.huggingface.cloud",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({inputs:{true_program:m,spec:v}})}).then(T=>T.json());g&&(g.guess?t(6,j=g.guess):t(6,j="<regex not found>"),g.top_1_success&&t(7,U=!0),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/${v.length}.json`,{method:"PUT",body:JSON.stringify({listener_idx:(d+r)%3,response:g})}))}}async function X(){console.log(y),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/full_spec.json`,{method:"PUT",body:JSON.stringify(v)}),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/completed.json`,{method:"PUT",body:JSON.stringify(!0)}),t(5,v=[]),await se().then(g=>{})}async function se(){l.length==0&&Ne(`${Pe}/interact/login`);let g=await fetch("https://regex-interact-default-rtdb.firebaseio.com/user_study.json").then(q=>q.json()),T=new Object,x=new Object;for(var N in g)if(g[N].hasOwnProperty("interaction")){let q=!1;g[N].interaction.hasOwnProperty("completed")&&g[N].interaction.completed&&(q=!0),g[N].interaction.hasOwnProperty(l)&&!q&&(T[N]=g[N]),Object.keys(g[N].interaction).length<o&&(x[N]=g[N])}else x[N]=g[N];Object.keys(T).length>n&&Ne(`${Pe}/interact/finish`),Object.keys(x).length==0&&Ne(`${Pe}/interact/finish`),t(1,d=Object.keys(T).length);let oe=kt(0,Object.keys(x).length);console.log(oe);let V=0;for(var N in x){if(V==oe){y=N,t(2,m=x[N].program),console.log(N,x[N]),console.log(y,m),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/completed.json`,{method:"PUT",body:JSON.stringify(!1)}).then(P=>P.json()),t(6,j=""),t(7,U=!1);return}V+=1}}ut(se);const G=[[]];function re(){w=this.value,t(3,w)}function ce(){b=this.__value,t(4,b)}function le(){b=this.__value,t(4,b)}return[n,d,m,w,b,v,j,U,te,X,re,ce,G,le]}class Tt extends Ze{constructor(e){super(),$e(this,e,It,wt,et,{})}}function jt(c){let e,t,l,r,i;return r=new Tt({}),{c(){e=u("meta"),t=O(),l=u("main"),tt(r.$$.fragment),this.h()},l(o){const n=ht("svelte-jy85c7",document.head);e=h(n,"META",{name:!0,content:!0}),n.forEach(a),t=S(o),l=h(o,"MAIN",{});var d=f(l);st(r.$$.fragment,d),d.forEach(a),this.h()},h(){document.title="Regex from Examples",p(e,"name","description"),p(e,"content","Collect examples of examples used to communicate about regexes")},m(o,n){s(document.head,e),L(o,t,n),L(o,l,n),rt(r,l,null),i=!0},p:nt,i(o){i||(lt(r.$$.fragment,o),i=!0)},o(o){ot(r.$$.fragment,o),i=!1},d(o){a(e),o&&a(t),o&&a(l),at(r)}}}class At extends Ze{constructor(e){super(),$e(this,e,null,jt,et,{})}}export{At as default};
