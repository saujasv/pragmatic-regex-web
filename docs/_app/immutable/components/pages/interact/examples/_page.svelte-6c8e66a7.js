import{S as Ze,i as xe,s as $e,k as u,q as w,a as j,w as et,l as h,m as f,r as k,h as o,c as O,x as tt,n as p,b as V,G as s,T as Fe,y as st,I as he,u as $,f as lt,t as rt,U as nt,z as at,L as it,H as ct,o as ut,e as Ge,B as ot,p as fe,Q as ht}from"../../../../chunks/index-0e9e634d.js";import{g as Se}from"../../../../chunks/navigation-c15f7844.js";import{u as ft}from"../../../../chunks/store-4445c58a.js";import{d as Be}from"../../../../chunks/singletons-69107a7c.js";import{S as dt}from"../../../../chunks/SvelteToast-ff19346a.js";import{t as ge}from"../../../../chunks/stores-3e1ed05a.js";function Qe(c,e,t){const a=c.slice();return a[22]=e[t],a}function pt(c){let e,t,a,l,i,r;return{c(){e=u("div"),t=u("h2"),a=w("You are now interacting with the "),l=u("span"),i=w("red"),r=w(" robot."),this.h()},l(n){e=h(n,"DIV",{});var d=f(e);t=h(d,"H2",{});var m=f(t);a=k(m,"You are now interacting with the "),l=h(m,"SPAN",{style:!0});var g=f(l);i=k(g,"red"),g.forEach(o),r=k(m," robot."),m.forEach(o),d.forEach(o),this.h()},h(){fe(l,"color","red")},m(n,d){V(n,e,d),s(e,t),s(t,a),s(t,l),s(l,i),s(t,r)},d(n){n&&o(e)}}}function mt(c){let e,t,a,l,i,r;return{c(){e=u("div"),t=u("h2"),a=w("You are now interacting with the "),l=u("span"),i=w("blue"),r=w(" robot."),this.h()},l(n){e=h(n,"DIV",{});var d=f(e);t=h(d,"H2",{});var m=f(t);a=k(m,"You are now interacting with the "),l=h(m,"SPAN",{style:!0});var g=f(l);i=k(g,"blue"),g.forEach(o),r=k(m," robot."),m.forEach(o),d.forEach(o),this.h()},h(){fe(l,"color","blue")},m(n,d){V(n,e,d),s(e,t),s(t,a),s(t,l),s(l,i),s(t,r)},d(n){n&&o(e)}}}function _t(c){let e,t,a,l,i,r;return{c(){e=u("div"),t=u("h2"),a=w("You are now interacting with the "),l=u("span"),i=w("green"),r=w(" robot."),this.h()},l(n){e=h(n,"DIV",{});var d=f(e);t=h(d,"H2",{});var m=f(t);a=k(m,"You are now interacting with the "),l=h(m,"SPAN",{style:!0});var g=f(l);i=k(g,"green"),g.forEach(o),r=k(m," robot."),m.forEach(o),d.forEach(o),this.h()},h(){fe(l,"color","green")},m(n,d){V(n,e,d),s(e,t),s(t,a),s(t,l),s(l,i),s(t,r)},d(n){n&&o(e)}}}function gt(c){let e,t,a,l,i;return{c(){e=u("div"),t=u("h2"),a=w("System's guess: "),l=u("tt"),i=w(c[6]),this.h()},l(r){e=h(r,"DIV",{class:!0});var n=f(e);t=h(n,"H2",{});var d=f(t);a=k(d,"System's guess: "),l=h(d,"TT",{style:!0});var m=f(l);i=k(m,c[6]),m.forEach(o),d.forEach(o),n.forEach(o),this.h()},h(){fe(l,"color","red"),p(e,"class","col-lg-10 py-md-3")},m(r,n){V(r,e,n),s(e,t),s(t,a),s(t,l),s(l,i)},p(r,n){n&64&&$(i,r[6])},d(r){r&&o(e)}}}function vt(c){let e,t,a,l,i;return{c(){e=u("div"),t=u("h2"),a=w("System's guess: "),l=u("tt"),i=w(c[6]),this.h()},l(r){e=h(r,"DIV",{class:!0});var n=f(e);t=h(n,"H2",{});var d=f(t);a=k(d,"System's guess: "),l=h(d,"TT",{style:!0});var m=f(l);i=k(m,c[6]),m.forEach(o),d.forEach(o),n.forEach(o),this.h()},h(){fe(l,"color","green"),p(e,"class","col-lg-10 py-md-3")},m(r,n){V(r,e,n),s(e,t),s(t,a),s(t,l),s(l,i)},p(r,n){n&64&&$(i,r[6])},d(r){r&&o(e)}}}function bt(c){let e,t,a=c[22].string+"",l,i,r,n,d,m,g,E;return{c(){e=u("div"),t=u("li"),l=w(a),i=j(),r=u("li"),n=u("i"),d=j(),m=u("li"),g=u("i"),E=j(),this.h()},l(v){e=h(v,"DIV",{class:!0});var y=f(e);t=h(y,"LI",{class:!0});var A=f(t);l=k(A,a),A.forEach(o),i=O(y),r=h(y,"LI",{class:!0});var N=f(r);n=h(N,"I",{class:!0}),f(n).forEach(o),N.forEach(o),d=O(y),m=h(y,"LI",{class:!0});var U=f(m);g=h(U,"I",{class:!0}),f(g).forEach(o),U.forEach(o),y.forEach(o),E=O(v),this.h()},h(){p(t,"class","list-group-item list-group-item flex-fill"),p(n,"class","fa-solid fa-plus"),p(r,"class","list-group-item list-group-item"),p(g,"class","fa-solid fa-minus"),p(m,"class","list-group-item list-group-item-danger"),p(e,"class","list-group list-group-horizontal py-md-1")},m(v,y){V(v,e,y),s(e,t),s(t,l),s(e,i),s(e,r),s(r,n),s(e,d),s(e,m),s(m,g),V(v,E,y)},p(v,y){y&32&&a!==(a=v[22].string+"")&&$(l,a)},d(v){v&&o(e),v&&o(E)}}}function yt(c){let e,t,a=c[22].string+"",l,i,r,n,d,m,g,E;return{c(){e=u("div"),t=u("li"),l=w(a),i=j(),r=u("li"),n=u("i"),d=j(),m=u("li"),g=u("i"),E=j(),this.h()},l(v){e=h(v,"DIV",{class:!0});var y=f(e);t=h(y,"LI",{class:!0});var A=f(t);l=k(A,a),A.forEach(o),i=O(y),r=h(y,"LI",{class:!0});var N=f(r);n=h(N,"I",{class:!0}),f(n).forEach(o),N.forEach(o),d=O(y),m=h(y,"LI",{class:!0});var U=f(m);g=h(U,"I",{class:!0}),f(g).forEach(o),U.forEach(o),y.forEach(o),E=O(v),this.h()},h(){p(t,"class","list-group-item list-group-item flex-fill"),p(n,"class","fa-solid fa-plus"),p(r,"class","list-group-item list-group-item-primary"),p(g,"class","fa-solid fa-minus"),p(m,"class","list-group-item list-group-item"),p(e,"class","list-group list-group-horizontal py-md-1")},m(v,y){V(v,e,y),s(e,t),s(t,l),s(e,i),s(e,r),s(r,n),s(e,d),s(e,m),s(m,g),V(v,E,y)},p(v,y){y&32&&a!==(a=v[22].string+"")&&$(l,a)},d(v){v&&o(e),v&&o(E)}}}function Ke(c){let e;function t(i,r){if(i[22].label=="+")return yt;if(i[22].label=="-")return bt}let a=t(c),l=a&&a(c);return{c(){l&&l.c(),e=Ge()},l(i){l&&l.l(i),e=Ge()},m(i,r){l&&l.m(i,r),V(i,e,r)},p(i,r){a===(a=t(i))&&l?l.p(i,r):(l&&l.d(1),l=a&&a(i),l&&(l.c(),l.m(e.parentNode,e)))},d(i){l&&l.d(i),i&&o(e)}}}function We(c){let e,t,a,l,i;return{c(){e=u("div"),t=u("button"),a=w("Submit"),this.h()},l(r){e=h(r,"DIV",{class:!0});var n=f(e);t=h(n,"BUTTON",{class:!0});var d=f(t);a=k(d,"Submit"),d.forEach(o),n.forEach(o),this.h()},h(){p(t,"class","btn btn-success btn-lg float-end"),p(e,"class","col-lg-6 py-md-5")},m(r,n){V(r,e,n),s(e,t),s(t,a),l||(i=he(t,"click",c[9]),l=!0)},p:ot,d(r){r&&o(e),l=!1,i()}}}function Et(c){let e,t,a,l,i,r,n,d,m,g,E,v,y,A,N,U,ee,J,C,ne,G,te,ie,I,P,T,D,se,le,R,ve,B,be,Q,ce,ye,H,Ee,K,ue,we,re,F,ke,Ie,ae,W,Te,de,Z,x,je,He;function Ae(_,b){return _[1]%3==0?_t:_[1]%3==1?mt:pt}let pe=Ae(c),X=pe(c);function Ye(_,b){return _[7]?vt:gt}let me=Ye(c),z=me(c),oe=c[5],Y=[];for(let _=0;_<oe.length;_+=1)Y[_]=Ke(Qe(c,oe,_));let L=(c[5].length>=10||c[7])&&We(c);return Z=new dt({}),{c(){e=u("div"),t=u("div"),a=u("h4"),l=w("Completed "),i=w(c[1]),r=w(" of "),n=w(c[0]),d=w(" tasks"),m=j(),g=u("div"),E=u("h2"),v=w("You are now the describer"),y=j(),A=u("p"),N=w("Here, you are presented with a regular expression. You need to interact with a system and communicate the regular expression. After each example is provided, a system that is playing the role of a guesser will guess which regular expression you might have been referring to. The game is completed when the system's guess matches the regular expression you were given, or when 10 examples have been provided."),U=j(),X.c(),ee=j(),J=u("div"),C=u("h2"),ne=w("Regex: "),G=u("tt"),te=w(c[2]),ie=j(),z.c(),I=j(),P=u("div"),T=u("div"),D=u("span"),se=w("Enter example"),le=j(),R=u("input"),ve=j(),B=u("input"),be=j(),Q=u("label"),ce=u("i"),ye=j(),H=u("input"),Ee=j(),K=u("label"),ue=u("i"),we=j(),re=u("div"),F=u("button"),ke=w("Add"),Ie=j(),ae=u("div"),W=u("ul");for(let _=0;_<Y.length;_+=1)Y[_].c();Te=j(),L&&L.c(),de=j(),et(Z.$$.fragment),this.h()},l(_){e=h(_,"DIV",{class:!0});var b=f(e);t=h(b,"DIV",{class:!0});var S=f(t);a=h(S,"H4",{});var q=f(a);l=k(q,"Completed "),i=k(q,c[1]),r=k(q," of "),n=k(q,c[0]),d=k(q," tasks"),q.forEach(o),S.forEach(o),m=O(b),g=h(b,"DIV",{class:!0});var Le=f(g);E=h(Le,"H2",{});var Ne=f(E);v=k(Ne,"You are now the describer"),Ne.forEach(o),Le.forEach(o),y=O(b),A=h(b,"P",{});var Pe=f(A);N=k(Pe,"Here, you are presented with a regular expression. You need to interact with a system and communicate the regular expression. After each example is provided, a system that is playing the role of a guesser will guess which regular expression you might have been referring to. The game is completed when the system's guess matches the regular expression you were given, or when 10 examples have been provided."),Pe.forEach(o),U=O(b),X.l(b),ee=O(b),J=h(b,"DIV",{class:!0});var Ve=f(J);C=h(Ve,"H2",{});var Oe=f(C);ne=k(Oe,"Regex: "),G=h(Oe,"TT",{});var Me=f(G);te=k(Me,c[2]),Me.forEach(o),Oe.forEach(o),Ve.forEach(o),ie=O(b),z.l(b),I=O(b),P=h(b,"DIV",{class:!0});var _e=f(P);T=h(_e,"DIV",{class:!0});var M=f(T);D=h(M,"SPAN",{class:!0});var Ue=f(D);se=k(Ue,"Enter example"),Ue.forEach(o),le=O(M),R=h(M,"INPUT",{type:!0,class:!0}),ve=O(M),B=h(M,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),be=O(M),Q=h(M,"LABEL",{class:!0,for:!0});var Re=f(Q);ce=h(Re,"I",{class:!0}),f(ce).forEach(o),Re.forEach(o),ye=O(M),H=h(M,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),Ee=O(M),K=h(M,"LABEL",{class:!0,for:!0});var ze=f(K);ue=h(ze,"I",{class:!0}),f(ue).forEach(o),ze.forEach(o),M.forEach(o),we=O(_e),re=h(_e,"DIV",{class:!0});var Ce=f(re);F=h(Ce,"BUTTON",{type:!0,class:!0});var Xe=f(F);ke=k(Xe,"Add"),Xe.forEach(o),Ce.forEach(o),_e.forEach(o),Ie=O(b),ae=h(b,"DIV",{class:!0});var qe=f(ae);W=h(qe,"UL",{class:!0});var Je=f(W);for(let De=0;De<Y.length;De+=1)Y[De].l(Je);Je.forEach(o),qe.forEach(o),Te=O(b),L&&L.l(b),de=O(b),tt(Z.$$.fragment,b),b.forEach(o),this.h()},h(){p(t,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),p(g,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),p(J,"class","col-lg-10 py-md-3"),p(D,"class","input-group-text"),p(R,"type","text"),p(R,"class","form-control"),p(B,"type","radio"),p(B,"class","btn-check"),p(B,"name","utterance-type"),B.__value="+",B.value=B.__value,p(B,"id","positive"),p(B,"autocomplete","off"),c[12][0].push(B),p(ce,"class","fa-solid fa-plus"),p(Q,"class","btn btn-outline-primary"),p(Q,"for","positive"),p(H,"type","radio"),p(H,"class","btn-check"),p(H,"name","utterance-type"),H.__value="-",H.value=H.__value,p(H,"id","negative"),p(H,"autocomplete","off"),c[12][0].push(H),p(ue,"class","fa-solid fa-minus"),p(K,"class","btn btn-outline-danger"),p(K,"for","negative"),p(T,"class","input-group col"),p(F,"type","submit"),p(F,"class","btn btn-primary col-auto"),p(re,"class","col"),p(P,"class","row gx-1"),p(W,"class","list-group"),p(ae,"class","col-lg-6 py-md-5"),p(e,"class","col-lg-10 mx-auto p-3 py-md-5")},m(_,b){V(_,e,b),s(e,t),s(t,a),s(a,l),s(a,i),s(a,r),s(a,n),s(a,d),s(e,m),s(e,g),s(g,E),s(E,v),s(e,y),s(e,A),s(A,N),s(e,U),X.m(e,null),s(e,ee),s(e,J),s(J,C),s(C,ne),s(C,G),s(G,te),s(e,ie),z.m(e,null),s(e,I),s(e,P),s(P,T),s(T,D),s(D,se),s(T,le),s(T,R),Fe(R,c[3]),s(T,ve),s(T,B),B.checked=B.__value===c[4],s(T,be),s(T,Q),s(Q,ce),s(T,ye),s(T,H),H.checked=H.__value===c[4],s(T,Ee),s(T,K),s(K,ue),s(P,we),s(P,re),s(re,F),s(F,ke),s(e,Ie),s(e,ae),s(ae,W);for(let S=0;S<Y.length;S+=1)Y[S].m(W,null);s(e,Te),L&&L.m(e,null),s(e,de),st(Z,e,null),x=!0,je||(He=[he(R,"input",c[10]),he(B,"change",c[11]),he(H,"change",c[13]),he(F,"click",c[8])],je=!0)},p(_,[b]){if((!x||b&2)&&$(i,_[1]),(!x||b&1)&&$(n,_[0]),pe!==(pe=Ae(_))&&(X.d(1),X=pe(_),X&&(X.c(),X.m(e,ee))),(!x||b&4)&&$(te,_[2]),me===(me=Ye(_))&&z?z.p(_,b):(z.d(1),z=me(_),z&&(z.c(),z.m(e,I))),b&8&&R.value!==_[3]&&Fe(R,_[3]),b&16&&(B.checked=B.__value===_[4]),b&16&&(H.checked=H.__value===_[4]),b&32){oe=_[5];let S;for(S=0;S<oe.length;S+=1){const q=Qe(_,oe,S);Y[S]?Y[S].p(q,b):(Y[S]=Ke(q),Y[S].c(),Y[S].m(W,null))}for(;S<Y.length;S+=1)Y[S].d(1);Y.length=oe.length}_[5].length>=10||_[7]?L?L.p(_,b):(L=We(_),L.c(),L.m(e,de)):L&&(L.d(1),L=null)},i(_){x||(lt(Z.$$.fragment,_),x=!0)},o(_){rt(Z.$$.fragment,_),x=!1},d(_){_&&o(e),X.d(),z.d(),c[12][0].splice(c[12][0].indexOf(B),1),c[12][0].splice(c[12][0].indexOf(H),1),nt(Y,_),L&&L.d(),at(Z),je=!1,it(He)}}}function wt(c,e){return c=Math.ceil(c),e=Math.floor(e),Math.floor(Math.random()*(e-c)+c)}function kt(c,e,t){let a;ct(c,ft,I=>t(18,a=I));let l=[],i=1,r=30,n=0,d="",m="",g="",E=null,v=[],y="",A=!1,N=0;function U(){if(l=[...l,{string:g,label:E,id:N}],g.length>0)if(E===null){ge.push("Label not provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}else{for(var I of v)if(g==I.string){ge.push("This example has already been provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}if(E=="+"&&g.match(`^${d}$`))t(5,v=[...v,{string:g,label:E,id:N}]),t(3,g=""),t(4,E=null),N+=1;else if(E=="-"&&!g.match(`^${d}$`))t(5,v=[...v,{string:g,label:E,id:N}]),t(3,g=""),t(4,E=null),N+=1;else{ge.push("Label does not match string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}}else{ge.push("Please enter a valid string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}ee()}async function ee(){if(n%3==0)await fetch("https://r6fve43vkbl7ddj4.us-east-1.aws.endpoints.huggingface.cloud",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({inputs:{true_program:d,spec:v}})}).then(I=>I.json()),t(6,y=answer.guess),answer.top_1_success&&t(7,A=!0);else if(n%3==1){let I=await fetch("https://qdkd8x0wqtlir789.us-east-1.aws.endpoints.huggingface.cloud",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({inputs:{true_program:d,spec:v}})}).then(P=>P.json());t(6,y=I.guess),I.top_1_success&&t(7,A=!0)}else await fetch("https://fk6zpavogt2hxcyr.us-east-1.aws.endpoints.huggingface.cloud",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({inputs:{true_program:d,spec:v}})}).then(I=>I.json()),t(6,y=answer.guess),answer.top_1_success&&t(7,A=!0)}async function J(){console.log(m),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/pilot/${m}/interaction/${a}.json`,{method:"PUT",body:JSON.stringify(v)}),t(5,v=[]),await C().then(I=>{})}async function C(){a.length==0&&Se(`${Be}/interact/login`);let I=await fetch("https://regex-interact-default-rtdb.firebaseio.com/pilot.json").then(R=>R.json()),P=new Object,T=new Object;for(var D in I)I[D].hasOwnProperty("interaction")?(I[D].interaction.hasOwnProperty(a)&&(P[D]=I[D]),Object.keys(I[D].interaction).length<i&&(T[D]=I[D])):T[D]=I[D];Object.keys(P).length>r&&Se(`${Be}/interact/finish`),Object.keys(T).length==0&&Se(`${Be}/interact/finish`),t(1,n=Object.keys(P).length);let se=wt(0,Object.keys(T).length);console.log(se);let le=0;for(var D in T){if(le==se){m=D,t(2,d=T[D].program),console.log(D,T[D]),console.log(m,d);return}le+=1}}ut(C);const ne=[[]];function G(){g=this.value,t(3,g)}function te(){E=this.__value,t(4,E)}function ie(){E=this.__value,t(4,E)}return[r,n,d,g,E,v,y,A,U,J,G,te,ne,ie]}class It extends Ze{constructor(e){super(),xe(this,e,kt,Et,$e,{})}}function Tt(c){let e,t,a,l,i;return l=new It({}),{c(){e=u("meta"),t=j(),a=u("main"),et(l.$$.fragment),this.h()},l(r){const n=ht("svelte-jy85c7",document.head);e=h(n,"META",{name:!0,content:!0}),n.forEach(o),t=O(r),a=h(r,"MAIN",{});var d=f(a);tt(l.$$.fragment,d),d.forEach(o),this.h()},h(){document.title="Regex from Examples",p(e,"name","description"),p(e,"content","Collect examples of examples used to communicate about regexes")},m(r,n){s(document.head,e),V(r,t,n),V(r,a,n),st(l,a,null),i=!0},p:ot,i(r){i||(lt(l.$$.fragment,r),i=!0)},o(r){rt(l.$$.fragment,r),i=!1},d(r){o(e),r&&o(t),r&&o(a),at(l)}}}class At extends Ze{constructor(e){super(),xe(this,e,null,Tt,$e,{})}}export{At as default};
