import{S as Ze,i as xe,s as et,k as i,q as H,a as O,w as tt,l as n,m as f,r as M,h as s,c as T,x as st,n as r,p as nt,b as Z,G as t,T as Xe,y as lt,I as oe,u as ue,f as at,t as rt,U as ct,z as ot,L as ut,H as ft,o as ht,e as Je,B as it,Q as dt}from"../../../../chunks/index-0e9e634d.js";import{g as Be}from"../../../../chunks/navigation-c15f7844.js";import{u as pt}from"../../../../chunks/store-cf389518.js";import{d as Ae}from"../../../../chunks/singletons-69107a7c.js";import{S as mt}from"../../../../chunks/SvelteToast-ff19346a.js";import{t as me}from"../../../../chunks/stores-3e1ed05a.js";function Qe(l,e,a){const o=l.slice();return o[23]=e[a],o}function gt(l){let e,a,o=l[23].string+"",c,h,u,b,I,j,_,k,y,L,w,R,z,D;function $(){return l[15](l[23])}return{c(){e=i("div"),a=i("li"),c=H(o),h=O(),u=i("li"),b=i("i"),I=O(),j=i("li"),_=i("i"),k=O(),y=i("li"),L=i("button"),w=i("i"),R=O(),this.h()},l(E){e=n(E,"DIV",{class:!0});var d=f(e);a=n(d,"LI",{class:!0});var q=f(a);c=M(q,o),q.forEach(s),h=T(d),u=n(d,"LI",{class:!0});var Q=f(u);b=n(Q,"I",{class:!0}),f(b).forEach(s),Q.forEach(s),I=T(d),j=n(d,"LI",{class:!0});var C=f(j);_=n(C,"I",{class:!0}),f(_).forEach(s),C.forEach(s),k=T(d),y=n(d,"LI",{class:!0});var Y=f(y);L=n(Y,"BUTTON",{class:!0});var F=f(L);w=n(F,"I",{class:!0}),f(w).forEach(s),F.forEach(s),Y.forEach(s),d.forEach(s),R=T(E),this.h()},h(){r(a,"class","list-group-item list-group-item flex-fill"),r(b,"class","fa-solid fa-plus"),r(u,"class","list-group-item list-group-item"),r(_,"class","fa-solid fa-minus"),r(j,"class","list-group-item list-group-item-danger"),r(w,"class","fa fa-times"),r(L,"class","btn btn-default btn-sm px-0 py-0"),r(y,"class","list-group-item list-group-item"),r(e,"class","list-group list-group-horizontal py-md-1")},m(E,d){Z(E,e,d),t(e,a),t(a,c),t(e,h),t(e,u),t(u,b),t(e,I),t(e,j),t(j,_),t(e,k),t(e,y),t(y,L),t(L,w),Z(E,R,d),z||(D=oe(L,"click",$),z=!0)},p(E,d){l=E,d&32&&o!==(o=l[23].string+"")&&ue(c,o)},d(E){E&&s(e),E&&s(R),z=!1,D()}}}function _t(l){let e,a,o=l[23].string+"",c,h,u,b,I,j,_,k,y,L,w,R,z,D;function $(){return l[14](l[23])}return{c(){e=i("div"),a=i("li"),c=H(o),h=O(),u=i("li"),b=i("i"),I=O(),j=i("li"),_=i("i"),k=O(),y=i("li"),L=i("button"),w=i("i"),R=O(),this.h()},l(E){e=n(E,"DIV",{class:!0});var d=f(e);a=n(d,"LI",{class:!0});var q=f(a);c=M(q,o),q.forEach(s),h=T(d),u=n(d,"LI",{class:!0});var Q=f(u);b=n(Q,"I",{class:!0}),f(b).forEach(s),Q.forEach(s),I=T(d),j=n(d,"LI",{class:!0});var C=f(j);_=n(C,"I",{class:!0}),f(_).forEach(s),C.forEach(s),k=T(d),y=n(d,"LI",{class:!0});var Y=f(y);L=n(Y,"BUTTON",{class:!0});var F=f(L);w=n(F,"I",{class:!0}),f(w).forEach(s),F.forEach(s),Y.forEach(s),d.forEach(s),R=T(E),this.h()},h(){r(a,"class","list-group-item list-group-item flex-fill"),r(b,"class","fa-solid fa-plus"),r(u,"class","list-group-item list-group-item-primary"),r(_,"class","fa-solid fa-minus"),r(j,"class","list-group-item list-group-item"),r(w,"class","fa fa-times"),r(L,"class","btn btn-default btn-sm px-0 py-0"),r(y,"class","list-group-item list-group-item"),r(e,"class","list-group list-group-horizontal py-md-1")},m(E,d){Z(E,e,d),t(e,a),t(a,c),t(e,h),t(e,u),t(u,b),t(e,I),t(e,j),t(j,_),t(e,k),t(e,y),t(y,L),t(L,w),Z(E,R,d),z||(D=oe(L,"click",$),z=!0)},p(E,d){l=E,d&32&&o!==(o=l[23].string+"")&&ue(c,o)},d(E){E&&s(e),E&&s(R),z=!1,D()}}}function Fe(l){let e;function a(h,u){if(h[23].label=="+")return _t;if(h[23].label=="-")return gt}let o=a(l),c=o&&o(l);return{c(){c&&c.c(),e=Je()},l(h){c&&c.l(h),e=Je()},m(h,u){c&&c.m(h,u),Z(h,e,u)},p(h,u){o===(o=a(h))&&c?c.p(h,u):(c&&c.d(1),c=o&&o(h),c&&(c.c(),c.m(e.parentNode,e)))},d(h){c&&c.d(h),h&&s(e)}}}function Ke(l){let e,a,o,c,h;return{c(){e=i("div"),a=i("button"),o=H("Submit"),this.h()},l(u){e=n(u,"DIV",{class:!0});var b=f(e);a=n(b,"BUTTON",{class:!0});var I=f(a);o=M(I,"Submit"),I.forEach(s),b.forEach(s),this.h()},h(){r(a,"class","btn btn-success btn-lg float-end"),r(e,"class","col-lg-6 py-md-5")},m(u,b){Z(u,e,b),t(e,a),t(a,o),c||(h=oe(a,"click",l[9]),c=!0)},p:it,d(u){u&&s(e),c=!1,h()}}}function vt(l){let e,a,o,c,h,u,b,I,j,_,k,y,L,w,R,z,D,$,E,d,q,Q,C,Y,F,m,G,U,p,B,X,te,ge,K,_e,N,ve,se,fe,be,P,ye,le,he,Ee,ie,x,ke,Ie,ne,ae,we,de,re,ee,Oe,Ne,ce=l[5],S=[];for(let g=0;g<ce.length;g+=1)S[g]=Fe(Qe(l,ce,g));let V=l[5].length>=5&&Ke(l);return re=new mt({}),{c(){e=i("div"),a=i("div"),o=i("h4"),c=H("Completed "),h=H(l[1]),u=H(" of "),b=H(l[0]),I=H(" tasks in this phase"),j=O(),_=i("div"),k=i("h2"),y=H("You are now the describer"),L=O(),w=i("p"),R=H("Here, you are presented with a regular expression. You need to interact with a system and communicate the regular expression. After each example is provided, a system that is playing the role of a guesser will guess which regular expression you might have been referring to. The game is completed when the system's guess matches the regular expression you were given, or when more than 15 examples have been provided."),z=O(),D=i("div"),$=i("h2"),E=H("Regex: "),d=i("tt"),q=H(l[2]),Q=O(),C=i("div"),Y=i("h2"),F=H("System's guess: "),m=i("tt"),G=H(l[6]),U=O(),p=i("div"),B=i("div"),X=i("span"),te=H("Enter example"),ge=O(),K=i("input"),_e=O(),N=i("input"),ve=O(),se=i("label"),fe=i("i"),be=O(),P=i("input"),ye=O(),le=i("label"),he=i("i"),Ee=O(),ie=i("div"),x=i("button"),ke=H("Add"),Ie=O(),ne=i("div"),ae=i("ul");for(let g=0;g<S.length;g+=1)S[g].c();we=O(),V&&V.c(),de=O(),tt(re.$$.fragment),this.h()},l(g){e=n(g,"DIV",{class:!0});var v=f(e);a=n(v,"DIV",{class:!0});var A=f(a);o=n(A,"H4",{});var W=f(o);c=M(W,"Completed "),h=M(W,l[1]),u=M(W," of "),b=M(W,l[0]),I=M(W," tasks in this phase"),W.forEach(s),A.forEach(s),j=T(v),_=n(v,"DIV",{class:!0});var Pe=f(_);k=n(Pe,"H2",{});var Ue=f(k);y=M(Ue,"You are now the describer"),Ue.forEach(s),Pe.forEach(s),L=T(v),w=n(v,"P",{});var De=f(w);R=M(De,"Here, you are presented with a regular expression. You need to interact with a system and communicate the regular expression. After each example is provided, a system that is playing the role of a guesser will guess which regular expression you might have been referring to. The game is completed when the system's guess matches the regular expression you were given, or when more than 15 examples have been provided."),De.forEach(s),z=T(v),D=n(v,"DIV",{class:!0});var Se=f(D);$=n(Se,"H2",{});var Te=f($);E=M(Te,"Regex: "),d=n(Te,"TT",{});var Ve=f(d);q=M(Ve,l[2]),Ve.forEach(s),Te.forEach(s),Se.forEach(s),Q=T(v),C=n(v,"DIV",{class:!0});var He=f(C);Y=n(He,"H2",{});var je=f(Y);F=M(je,"System's guess: "),m=n(je,"TT",{style:!0});var Me=f(m);G=M(Me,l[6]),Me.forEach(s),je.forEach(s),He.forEach(s),U=T(v),p=n(v,"DIV",{class:!0});var pe=f(p);B=n(pe,"DIV",{class:!0});var J=f(B);X=n(J,"SPAN",{class:!0});var Re=f(X);te=M(Re,"Enter example"),Re.forEach(s),ge=T(J),K=n(J,"INPUT",{type:!0,class:!0}),_e=T(J),N=n(J,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),ve=T(J),se=n(J,"LABEL",{class:!0,for:!0});var Ce=f(se);fe=n(Ce,"I",{class:!0}),f(fe).forEach(s),Ce.forEach(s),be=T(J),P=n(J,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),ye=T(J),le=n(J,"LABEL",{class:!0,for:!0});var ze=f(le);he=n(ze,"I",{class:!0}),f(he).forEach(s),ze.forEach(s),J.forEach(s),Ee=T(pe),ie=n(pe,"DIV",{class:!0});var Ye=f(ie);x=n(Ye,"BUTTON",{type:!0,class:!0});var $e=f(x);ke=M($e,"Add"),$e.forEach(s),Ye.forEach(s),pe.forEach(s),Ie=T(v),ne=n(v,"DIV",{class:!0});var qe=f(ne);ae=n(qe,"UL",{class:!0});var Ge=f(ae);for(let Le=0;Le<S.length;Le+=1)S[Le].l(Ge);Ge.forEach(s),qe.forEach(s),we=T(v),V&&V.l(v),de=T(v),st(re.$$.fragment,v),v.forEach(s),this.h()},h(){r(a,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),r(_,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),r(D,"class","col-lg-10 py-md-3"),nt(m,"color","red"),r(C,"class","col-lg-10 py-md-3"),r(X,"class","input-group-text"),r(K,"type","text"),r(K,"class","form-control"),r(N,"type","radio"),r(N,"class","btn-check"),r(N,"name","utterance-type"),N.__value="+",N.value=N.__value,r(N,"id","positive"),r(N,"autocomplete","off"),l[12][0].push(N),r(fe,"class","fa-solid fa-plus"),r(se,"class","btn btn-outline-primary"),r(se,"for","positive"),r(P,"type","radio"),r(P,"class","btn-check"),r(P,"name","utterance-type"),P.__value="-",P.value=P.__value,r(P,"id","negative"),r(P,"autocomplete","off"),l[12][0].push(P),r(he,"class","fa-solid fa-minus"),r(le,"class","btn btn-outline-danger"),r(le,"for","negative"),r(B,"class","input-group col"),r(x,"type","submit"),r(x,"class","btn btn-primary col-auto"),r(ie,"class","col"),r(p,"class","row gx-1"),r(ae,"class","list-group"),r(ne,"class","col-lg-6 py-md-5"),r(e,"class","col-lg-10 mx-auto p-3 py-md-5")},m(g,v){Z(g,e,v),t(e,a),t(a,o),t(o,c),t(o,h),t(o,u),t(o,b),t(o,I),t(e,j),t(e,_),t(_,k),t(k,y),t(e,L),t(e,w),t(w,R),t(e,z),t(e,D),t(D,$),t($,E),t($,d),t(d,q),t(e,Q),t(e,C),t(C,Y),t(Y,F),t(Y,m),t(m,G),t(e,U),t(e,p),t(p,B),t(B,X),t(X,te),t(B,ge),t(B,K),Xe(K,l[3]),t(B,_e),t(B,N),N.checked=N.__value===l[4],t(B,ve),t(B,se),t(se,fe),t(B,be),t(B,P),P.checked=P.__value===l[4],t(B,ye),t(B,le),t(le,he),t(p,Ee),t(p,ie),t(ie,x),t(x,ke),t(e,Ie),t(e,ne),t(ne,ae);for(let A=0;A<S.length;A+=1)S[A].m(ae,null);t(e,we),V&&V.m(e,null),t(e,de),lt(re,e,null),ee=!0,Oe||(Ne=[oe(K,"input",l[10]),oe(N,"change",l[11]),oe(P,"change",l[13]),oe(x,"click",l[7])],Oe=!0)},p(g,[v]){if((!ee||v&2)&&ue(h,g[1]),(!ee||v&1)&&ue(b,g[0]),(!ee||v&4)&&ue(q,g[2]),(!ee||v&64)&&ue(G,g[6]),v&8&&K.value!==g[3]&&Xe(K,g[3]),v&16&&(N.checked=N.__value===g[4]),v&16&&(P.checked=P.__value===g[4]),v&288){ce=g[5];let A;for(A=0;A<ce.length;A+=1){const W=Qe(g,ce,A);S[A]?S[A].p(W,v):(S[A]=Fe(W),S[A].c(),S[A].m(ae,null))}for(;A<S.length;A+=1)S[A].d(1);S.length=ce.length}g[5].length>=5?V?V.p(g,v):(V=Ke(g),V.c(),V.m(e,de)):V&&(V.d(1),V=null)},i(g){ee||(at(re.$$.fragment,g),ee=!0)},o(g){rt(re.$$.fragment,g),ee=!1},d(g){g&&s(e),l[12][0].splice(l[12][0].indexOf(N),1),l[12][0].splice(l[12][0].indexOf(P),1),ct(S,g),V&&V.d(),ot(re),Oe=!1,ut(Ne)}}}function We(l,e){return l=Math.ceil(l),e=Math.floor(e),Math.floor(Math.random()*(e-l)+l)}function bt(l,e,a){let o;ft(l,pt,m=>a(20,o=m));let c=[],h=1,u=5,b=0,I="",j="",_="",k=null,y=[],L="",w=0;function R(){if(c=[...c,{string:_,label:k,id:w}],_.length>0)if(k===null){me.push("Label not provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}else{for(var m of y)if(_==m.string){me.push("This example has already been provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}if(k=="+"&&_.match(`^${I}$`))a(5,y=[...y,{string:_,label:k,id:w}]),a(3,_=""),a(4,k=null),w+=1;else if(k=="-"&&!_.match(`^${I}$`))a(5,y=[...y,{string:_,label:k,id:w}]),a(3,_=""),a(4,k=null),w+=1;else{me.push("Label does not match string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}}else{me.push("Please enter a valid string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}z()}async function z(){let m=await fetch("https://try-regex-default-rtdb.firebaseio.com/heldout-describe-pilot.json").then(te=>te.json()),G=new Object,U=new Object;for(var p in m)m[p].hasOwnProperty("descriptions")?(m[p].descriptions.hasOwnProperty(o)&&(G[p]=m[p]),Object.keys(m[p].descriptions).length<h&&(U[p]=m[p])):U[p]=m[p];let B=We(0,Object.keys(U).length);console.log(B);let X=0;for(var p in U){if(X==B){a(6,L=U[p].program);return}X+=1}}function D(m){a(5,y=y.filter(G=>G.id!=m))}async function $(){console.log(j),await fetch(`https://try-regex-default-rtdb.firebaseio.com/heldout-describe-pilot/${j}/descriptions/${o}.json`,{method:"PUT",body:JSON.stringify(y)}),a(5,y=[]),await E().then(m=>{})}async function E(){o.length==0&&Be(`${Ae}/annotate/login`);let m=await fetch("https://try-regex-default-rtdb.firebaseio.com/heldout-describe-pilot.json").then(te=>te.json()),G=new Object,U=new Object;for(var p in m)m[p].hasOwnProperty("descriptions")?(m[p].descriptions.hasOwnProperty(o)&&(G[p]=m[p]),Object.keys(m[p].descriptions).length<h&&(U[p]=m[p])):U[p]=m[p];Object.keys(G).length>u&&Be(`${Ae}/annotate/finish`),Object.keys(U).length==0&&Be(`${Ae}/annotate/finish`),a(1,b=Object.keys(G).length);let B=We(0,Object.keys(U).length);console.log(B);let X=0;for(var p in U){if(X==B){j=p,a(2,I=U[p].program),console.log(p,U[p]),console.log(j,I);return}X+=1}}ht(E);const d=[[]];function q(){_=this.value,a(3,_)}function Q(){k=this.__value,a(4,k)}function C(){k=this.__value,a(4,k)}return[u,b,I,_,k,y,L,R,D,$,q,Q,d,C,m=>D(m.id),m=>D(m.id)]}class yt extends Ze{constructor(e){super(),xe(this,e,bt,vt,et,{})}}function Et(l){let e,a,o,c,h;return c=new yt({}),{c(){e=i("meta"),a=O(),o=i("main"),tt(c.$$.fragment),this.h()},l(u){const b=dt("svelte-jy85c7",document.head);e=n(b,"META",{name:!0,content:!0}),b.forEach(s),a=T(u),o=n(u,"MAIN",{});var I=f(o);st(c.$$.fragment,I),I.forEach(s),this.h()},h(){document.title="Regex from Examples",r(e,"name","description"),r(e,"content","Collect examples of examples used to communicate about regexes")},m(u,b){t(document.head,e),Z(u,a,b),Z(u,o,b),lt(c,o,null),h=!0},p:it,i(u){h||(at(c.$$.fragment,u),h=!0)},o(u){rt(c.$$.fragment,u),h=!1},d(u){s(e),u&&s(a),u&&s(o),ot(c)}}}class Lt extends Ze{constructor(e){super(),xe(this,e,null,Et,et,{})}}export{Lt as default};
