import{S as Ze,i as $e,s as et,k as u,q as k,a as j,w as tt,l as h,m as f,r as I,h as o,c as O,x as st,n as p,b as Y,G as s,T as Fe,y as rt,I as fe,u as ee,f as lt,t as at,U as nt,z as ot,L as ct,H as Ge,o as ut,e as Ke,B as it,p as de,Q as ht}from"../../../../chunks/index-0e9e634d.js";import{g as Ne}from"../../../../chunks/navigation-c15f7844.js";import{u as ft,o as dt}from"../../../../chunks/store-b95407d5.js";import{d as Pe}from"../../../../chunks/singletons-69107a7c.js";import{S as pt}from"../../../../chunks/SvelteToast-ff19346a.js";import{t as ve}from"../../../../chunks/stores-3e1ed05a.js";function Qe(c,e,t){const l=c.slice();return l[23]=e[t],l}function mt(c){let e,t,l,r,n,a;return{c(){e=u("div"),t=u("h2"),l=k("You are now interacting with the "),r=u("span"),n=k("red"),a=k(" robot."),this.h()},l(i){e=h(i,"DIV",{});var d=f(e);t=h(d,"H2",{});var m=f(t);l=I(m,"You are now interacting with the "),r=h(m,"SPAN",{style:!0});var y=f(r);n=I(y,"red"),y.forEach(o),a=I(m," robot."),m.forEach(o),d.forEach(o),this.h()},h(){de(r,"color","red")},m(i,d){Y(i,e,d),s(e,t),s(t,l),s(t,r),s(r,n),s(t,a)},d(i){i&&o(e)}}}function _t(c){let e,t,l,r,n,a;return{c(){e=u("div"),t=u("h2"),l=k("You are now interacting with the "),r=u("span"),n=k("blue"),a=k(" robot."),this.h()},l(i){e=h(i,"DIV",{});var d=f(e);t=h(d,"H2",{});var m=f(t);l=I(m,"You are now interacting with the "),r=h(m,"SPAN",{style:!0});var y=f(r);n=I(y,"blue"),y.forEach(o),a=I(m," robot."),m.forEach(o),d.forEach(o),this.h()},h(){de(r,"color","blue")},m(i,d){Y(i,e,d),s(e,t),s(t,l),s(t,r),s(r,n),s(t,a)},d(i){i&&o(e)}}}function gt(c){let e,t,l,r,n,a;return{c(){e=u("div"),t=u("h2"),l=k("You are now interacting with the "),r=u("span"),n=k("green"),a=k(" robot."),this.h()},l(i){e=h(i,"DIV",{});var d=f(e);t=h(d,"H2",{});var m=f(t);l=I(m,"You are now interacting with the "),r=h(m,"SPAN",{style:!0});var y=f(r);n=I(y,"green"),y.forEach(o),a=I(m," robot."),m.forEach(o),d.forEach(o),this.h()},h(){de(r,"color","green")},m(i,d){Y(i,e,d),s(e,t),s(t,l),s(t,r),s(r,n),s(t,a)},d(i){i&&o(e)}}}function vt(c){let e,t,l,r,n;return{c(){e=u("div"),t=u("h2"),l=k("System's guess: "),r=u("tt"),n=k(c[6]),this.h()},l(a){e=h(a,"DIV",{class:!0});var i=f(e);t=h(i,"H2",{});var d=f(t);l=I(d,"System's guess: "),r=h(d,"TT",{style:!0});var m=f(r);n=I(m,c[6]),m.forEach(o),d.forEach(o),i.forEach(o),this.h()},h(){de(r,"color","red"),p(e,"class","col-lg-10 py-md-3")},m(a,i){Y(a,e,i),s(e,t),s(t,l),s(t,r),s(r,n)},p(a,i){i&64&&ee(n,a[6])},d(a){a&&o(e)}}}function bt(c){let e,t,l,r,n;return{c(){e=u("div"),t=u("h2"),l=k("System's guess: "),r=u("tt"),n=k(c[6]),this.h()},l(a){e=h(a,"DIV",{class:!0});var i=f(e);t=h(i,"H2",{});var d=f(t);l=I(d,"System's guess: "),r=h(d,"TT",{style:!0});var m=f(r);n=I(m,c[6]),m.forEach(o),d.forEach(o),i.forEach(o),this.h()},h(){de(r,"color","green"),p(e,"class","col-lg-10 py-md-3")},m(a,i){Y(a,e,i),s(e,t),s(t,l),s(t,r),s(r,n)},p(a,i){i&64&&ee(n,a[6])},d(a){a&&o(e)}}}function yt(c){let e,t,l=c[23].string+"",r,n,a,i,d,m,y,w;return{c(){e=u("div"),t=u("li"),r=k(l),n=j(),a=u("li"),i=u("i"),d=j(),m=u("li"),y=u("i"),w=j(),this.h()},l(b){e=h(b,"DIV",{class:!0});var g=f(e);t=h(g,"LI",{class:!0});var S=f(t);r=I(S,l),S.forEach(o),n=O(g),a=h(g,"LI",{class:!0});var U=f(a);i=h(U,"I",{class:!0}),f(i).forEach(o),U.forEach(o),d=O(g),m=h(g,"LI",{class:!0});var L=f(m);y=h(L,"I",{class:!0}),f(y).forEach(o),L.forEach(o),g.forEach(o),w=O(b),this.h()},h(){p(t,"class","list-group-item list-group-item flex-fill"),p(i,"class","fa-solid fa-plus"),p(a,"class","list-group-item list-group-item"),p(y,"class","fa-solid fa-minus"),p(m,"class","list-group-item list-group-item-danger"),p(e,"class","list-group list-group-horizontal py-md-1")},m(b,g){Y(b,e,g),s(e,t),s(t,r),s(e,n),s(e,a),s(a,i),s(e,d),s(e,m),s(m,y),Y(b,w,g)},p(b,g){g&32&&l!==(l=b[23].string+"")&&ee(r,l)},d(b){b&&o(e),b&&o(w)}}}function Et(c){let e,t,l=c[23].string+"",r,n,a,i,d,m,y,w;return{c(){e=u("div"),t=u("li"),r=k(l),n=j(),a=u("li"),i=u("i"),d=j(),m=u("li"),y=u("i"),w=j(),this.h()},l(b){e=h(b,"DIV",{class:!0});var g=f(e);t=h(g,"LI",{class:!0});var S=f(t);r=I(S,l),S.forEach(o),n=O(g),a=h(g,"LI",{class:!0});var U=f(a);i=h(U,"I",{class:!0}),f(i).forEach(o),U.forEach(o),d=O(g),m=h(g,"LI",{class:!0});var L=f(m);y=h(L,"I",{class:!0}),f(y).forEach(o),L.forEach(o),g.forEach(o),w=O(b),this.h()},h(){p(t,"class","list-group-item list-group-item flex-fill"),p(i,"class","fa-solid fa-plus"),p(a,"class","list-group-item list-group-item-primary"),p(y,"class","fa-solid fa-minus"),p(m,"class","list-group-item list-group-item"),p(e,"class","list-group list-group-horizontal py-md-1")},m(b,g){Y(b,e,g),s(e,t),s(t,r),s(e,n),s(e,a),s(a,i),s(e,d),s(e,m),s(m,y),Y(b,w,g)},p(b,g){g&32&&l!==(l=b[23].string+"")&&ee(r,l)},d(b){b&&o(e),b&&o(w)}}}function xe(c){let e;function t(n,a){if(n[23].label=="+")return Et;if(n[23].label=="-")return yt}let l=t(c),r=l&&l(c);return{c(){r&&r.c(),e=Ke()},l(n){r&&r.l(n),e=Ke()},m(n,a){r&&r.m(n,a),Y(n,e,a)},p(n,a){l===(l=t(n))&&r?r.p(n,a):(r&&r.d(1),r=l&&l(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){r&&r.d(n),n&&o(e)}}}function We(c){let e,t,l,r,n;return{c(){e=u("div"),t=u("button"),l=k("Submit"),this.h()},l(a){e=h(a,"DIV",{class:!0});var i=f(e);t=h(i,"BUTTON",{class:!0});var d=f(t);l=I(d,"Submit"),d.forEach(o),i.forEach(o),this.h()},h(){p(t,"class","btn btn-success btn-lg float-end"),p(e,"class","col-lg-6 py-md-5")},m(a,i){Y(a,e,i),s(e,t),s(t,l),r||(n=fe(t,"click",c[9]),r=!0)},p:it,d(a){a&&o(e),r=!1,n()}}}function wt(c){let e,t,l,r,n,a,i,d,m,y,w,b,g,S,U,L,te,X,q,se,K,re,ce,le,v,T,V,N,ae,M,F,P,be,Q,ue,ye,B,Ee,x,he,we,oe,G,ke,Ie,ie,W,Te,pe,Z,$,je,De;function Be(_,E){return _[1]%3==0?gt:_[1]%3==1?_t:mt}let me=Be(c),z=me(c);function Ae(_,E){return _[7]?bt:vt}let _e=Ae(c),R=_e(c),ne=c[5],A=[];for(let _=0;_<ne.length;_+=1)A[_]=xe(Qe(c,ne,_));let H=(c[5].length>=10||c[7])&&We(c);return Z=new pt({}),{c(){e=u("div"),t=u("div"),l=u("h4"),r=k("Completed "),n=k(c[1]),a=k(" of "),i=k(c[0]),d=k(" tasks"),m=j(),y=u("div"),w=u("h2"),b=k("You are now the describer"),g=j(),S=u("p"),U=k("Here, you are presented with a regular expression. You need to interact with a system and communicate the regular expression. After each example is provided, a system that is playing the role of a guesser will guess which regular expression you might have been referring to. The game is completed when the system's guess matches the regular expression you were given, or when 10 examples have been provided."),L=j(),z.c(),te=j(),X=u("div"),q=u("h2"),se=k("Regex: "),K=u("tt"),re=k(c[2]),ce=j(),R.c(),le=j(),v=u("div"),T=u("div"),V=u("span"),N=k("Enter example"),ae=j(),M=u("input"),F=j(),P=u("input"),be=j(),Q=u("label"),ue=u("i"),ye=j(),B=u("input"),Ee=j(),x=u("label"),he=u("i"),we=j(),oe=u("div"),G=u("button"),ke=k("Add"),Ie=j(),ie=u("div"),W=u("ul");for(let _=0;_<A.length;_+=1)A[_].c();Te=j(),H&&H.c(),pe=j(),tt(Z.$$.fragment),this.h()},l(_){e=h(_,"DIV",{class:!0});var E=f(e);t=h(E,"DIV",{class:!0});var D=f(t);l=h(D,"H4",{});var C=f(l);r=I(C,"Completed "),n=I(C,c[1]),a=I(C," of "),i=I(C,c[0]),d=I(C," tasks"),C.forEach(o),D.forEach(o),m=O(E),y=h(E,"DIV",{class:!0});var He=f(y);w=h(He,"H2",{});var Ue=f(w);b=I(Ue,"You are now the describer"),Ue.forEach(o),He.forEach(o),g=O(E),S=h(E,"P",{});var Le=f(S);U=I(Le,"Here, you are presented with a regular expression. You need to interact with a system and communicate the regular expression. After each example is provided, a system that is playing the role of a guesser will guess which regular expression you might have been referring to. The game is completed when the system's guess matches the regular expression you were given, or when 10 examples have been provided."),Le.forEach(o),L=O(E),z.l(E),te=O(E),X=h(E,"DIV",{class:!0});var Ve=f(X);q=h(Ve,"H2",{});var Oe=f(q);se=I(Oe,"Regex: "),K=h(Oe,"TT",{});var Ye=f(K);re=I(Ye,c[2]),Ye.forEach(o),Oe.forEach(o),Ve.forEach(o),ce=O(E),R.l(E),le=O(E),v=h(E,"DIV",{class:!0});var ge=f(v);T=h(ge,"DIV",{class:!0});var J=f(T);V=h(J,"SPAN",{class:!0});var Me=f(V);N=I(Me,"Enter example"),Me.forEach(o),ae=O(J),M=h(J,"INPUT",{type:!0,class:!0}),F=O(J),P=h(J,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),be=O(J),Q=h(J,"LABEL",{class:!0,for:!0});var Je=f(Q);ue=h(Je,"I",{class:!0}),f(ue).forEach(o),Je.forEach(o),ye=O(J),B=h(J,"INPUT",{type:!0,class:!0,name:!0,id:!0,autocomplete:!0}),Ee=O(J),x=h(J,"LABEL",{class:!0,for:!0});var Re=f(x);he=h(Re,"I",{class:!0}),f(he).forEach(o),Re.forEach(o),J.forEach(o),we=O(ge),oe=h(ge,"DIV",{class:!0});var ze=f(oe);G=h(ze,"BUTTON",{type:!0,class:!0});var Ce=f(G);ke=I(Ce,"Add"),Ce.forEach(o),ze.forEach(o),ge.forEach(o),Ie=O(E),ie=h(E,"DIV",{class:!0});var Xe=f(ie);W=h(Xe,"UL",{class:!0});var qe=f(W);for(let Se=0;Se<A.length;Se+=1)A[Se].l(qe);qe.forEach(o),Xe.forEach(o),Te=O(E),H&&H.l(E),pe=O(E),st(Z.$$.fragment,E),E.forEach(o),this.h()},h(){p(t,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),p(y,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),p(X,"class","col-lg-10 py-md-3"),p(V,"class","input-group-text"),p(M,"type","text"),p(M,"class","form-control"),p(P,"type","radio"),p(P,"class","btn-check"),p(P,"name","utterance-type"),P.__value="+",P.value=P.__value,p(P,"id","positive"),p(P,"autocomplete","off"),c[12][0].push(P),p(ue,"class","fa-solid fa-plus"),p(Q,"class","btn btn-outline-primary"),p(Q,"for","positive"),p(B,"type","radio"),p(B,"class","btn-check"),p(B,"name","utterance-type"),B.__value="-",B.value=B.__value,p(B,"id","negative"),p(B,"autocomplete","off"),c[12][0].push(B),p(he,"class","fa-solid fa-minus"),p(x,"class","btn btn-outline-danger"),p(x,"for","negative"),p(T,"class","input-group col"),p(G,"type","submit"),p(G,"class","btn btn-primary col-auto"),p(oe,"class","col"),p(v,"class","row gx-1"),p(W,"class","list-group"),p(ie,"class","col-lg-6 py-md-5"),p(e,"class","col-lg-10 mx-auto p-3 py-md-5")},m(_,E){Y(_,e,E),s(e,t),s(t,l),s(l,r),s(l,n),s(l,a),s(l,i),s(l,d),s(e,m),s(e,y),s(y,w),s(w,b),s(e,g),s(e,S),s(S,U),s(e,L),z.m(e,null),s(e,te),s(e,X),s(X,q),s(q,se),s(q,K),s(K,re),s(e,ce),R.m(e,null),s(e,le),s(e,v),s(v,T),s(T,V),s(V,N),s(T,ae),s(T,M),Fe(M,c[3]),s(T,F),s(T,P),P.checked=P.__value===c[4],s(T,be),s(T,Q),s(Q,ue),s(T,ye),s(T,B),B.checked=B.__value===c[4],s(T,Ee),s(T,x),s(x,he),s(v,we),s(v,oe),s(oe,G),s(G,ke),s(e,Ie),s(e,ie),s(ie,W);for(let D=0;D<A.length;D+=1)A[D].m(W,null);s(e,Te),H&&H.m(e,null),s(e,pe),rt(Z,e,null),$=!0,je||(De=[fe(M,"input",c[10]),fe(P,"change",c[11]),fe(B,"change",c[13]),fe(G,"click",c[8])],je=!0)},p(_,[E]){if((!$||E&2)&&ee(n,_[1]),(!$||E&1)&&ee(i,_[0]),me!==(me=Be(_))&&(z.d(1),z=me(_),z&&(z.c(),z.m(e,te))),(!$||E&4)&&ee(re,_[2]),_e===(_e=Ae(_))&&R?R.p(_,E):(R.d(1),R=_e(_),R&&(R.c(),R.m(e,le))),E&8&&M.value!==_[3]&&Fe(M,_[3]),E&16&&(P.checked=P.__value===_[4]),E&16&&(B.checked=B.__value===_[4]),E&32){ne=_[5];let D;for(D=0;D<ne.length;D+=1){const C=Qe(_,ne,D);A[D]?A[D].p(C,E):(A[D]=xe(C),A[D].c(),A[D].m(W,null))}for(;D<A.length;D+=1)A[D].d(1);A.length=ne.length}_[5].length>=10||_[7]?H?H.p(_,E):(H=We(_),H.c(),H.m(e,pe)):H&&(H.d(1),H=null)},i(_){$||(lt(Z.$$.fragment,_),$=!0)},o(_){at(Z.$$.fragment,_),$=!1},d(_){_&&o(e),z.d(),R.d(),c[12][0].splice(c[12][0].indexOf(P),1),c[12][0].splice(c[12][0].indexOf(B),1),nt(A,_),H&&H.d(),ot(Z),je=!1,ct(De)}}}function kt(c,e){return c=Math.ceil(c),e=Math.floor(e),Math.floor(Math.random()*(e-c)+c)}function It(c,e,t){let l,r;Ge(c,ft,v=>t(18,l=v)),Ge(c,dt,v=>t(19,r=v));let n=[],a=1,i=30,d=0,m="",y="",w="",b=null,g=[],S="",U=!1,L=0;function te(){if(n=[...n,{string:w,label:b,id:L}],w.length>0)if(b===null){ve.push("Label not provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}else{for(var v of g)if(w==v.string){ve.push("This example has already been provided",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}if(b=="+"&&w.match(`^${m}$`))t(5,g=[...g,{string:w,label:b,id:L}]),t(3,w=""),t(4,b=null),L+=1;else if(b=="-"&&!w.match(`^${m}$`))t(5,g=[...g,{string:w,label:b,id:L}]),t(3,w=""),t(4,b=null),L+=1;else{ve.push("Label does not match string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}}else{ve.push("Please enter a valid string",{theme:{"--toastBarHeight":0,"--toastBackground":"red"}});return}X()}async function X(){if((d+r)%3==0){t(6,S="");let v=await fetch("https://sqv1rlpqi9lshx3r.us-east-1.aws.endpoints.huggingface.cloud",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({inputs:{true_program:m,spec:g}})}).then(T=>T.json());v&&(t(6,S=v.guess),v.top_1_success&&t(7,U=!0),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/${g.length}.json`,{method:"PUT",body:JSON.stringify({listener_idx:(d+r)%3,response:v})}))}else if((d+r)%3==1){t(6,S="");let v=await fetch("https://c0vmrzlr7laeho8b.us-east-1.aws.endpoints.huggingface.cloud",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({inputs:{true_program:m,spec:g}})}).then(T=>T.json());v&&(t(6,S=v.guess),v.top_1_success&&t(7,U=!0),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/${g.length}.json`,{method:"PUT",body:JSON.stringify({listener_idx:(d+r)%3,response:v})}))}else{t(6,S="");let v=await fetch("https://fa096oepnph7ti6r.us-east-1.aws.endpoints.huggingface.cloud",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({inputs:{true_program:m,spec:g}})}).then(T=>T.json());v&&(t(6,S=v.guess),v.top_1_success&&t(7,U=!0),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/${g.length}.json`,{method:"PUT",body:JSON.stringify({listener_idx:(d+r)%3,response:v})}))}}async function q(){console.log(y),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/full_spec.json`,{method:"PUT",body:JSON.stringify(g)}),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/completed.json`,{method:"PUT",body:JSON.stringify(!0)}),t(5,g=[]),await se().then(v=>{})}async function se(){l.length==0&&Ne(`${Pe}/interact/login`);let v=await fetch("https://regex-interact-default-rtdb.firebaseio.com/user_study.json").then(F=>F.json()),T=new Object,V=new Object;for(var N in v)if(v[N].hasOwnProperty("interaction")){let F=!1;v[N].interaction.hasOwnProperty("completed")&&v[N].interaction.completed&&(F=!0),v[N].interaction.hasOwnProperty(l)&&!F&&(T[N]=v[N]),Object.keys(v[N].interaction).length<a&&(V[N]=v[N])}else V[N]=v[N];Object.keys(T).length>i&&Ne(`${Pe}/interact/finish`),Object.keys(V).length==0&&Ne(`${Pe}/interact/finish`),t(1,d=Object.keys(T).length);let ae=kt(0,Object.keys(V).length);console.log(ae);let M=0;for(var N in V){if(M==ae){y=N,t(2,m=V[N].program),console.log(N,V[N]),console.log(y,m),await fetch(`https://regex-interact-default-rtdb.firebaseio.com/user_study/${y}/interaction/${l}/completed.json`,{method:"PUT",body:JSON.stringify(!1)}).then(P=>P.json()),t(6,S=""),t(7,U=!1);return}M+=1}}ut(se);const K=[[]];function re(){w=this.value,t(3,w)}function ce(){b=this.__value,t(4,b)}function le(){b=this.__value,t(4,b)}return[i,d,m,w,b,g,S,U,te,q,re,ce,K,le]}class Tt extends Ze{constructor(e){super(),$e(this,e,It,wt,et,{})}}function jt(c){let e,t,l,r,n;return r=new Tt({}),{c(){e=u("meta"),t=j(),l=u("main"),tt(r.$$.fragment),this.h()},l(a){const i=ht("svelte-jy85c7",document.head);e=h(i,"META",{name:!0,content:!0}),i.forEach(o),t=O(a),l=h(a,"MAIN",{});var d=f(l);st(r.$$.fragment,d),d.forEach(o),this.h()},h(){document.title="Regex from Examples",p(e,"name","description"),p(e,"content","Collect examples of examples used to communicate about regexes")},m(a,i){s(document.head,e),Y(a,t,i),Y(a,l,i),rt(r,l,null),n=!0},p:it,i(a){n||(lt(r.$$.fragment,a),n=!0)},o(a){at(r.$$.fragment,a),n=!1},d(a){o(e),a&&o(t),a&&o(l),ot(r)}}}class At extends Ze{constructor(e){super(),$e(this,e,null,jt,et,{})}}export{At as default};
